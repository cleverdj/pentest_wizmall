<?
/* 
powered by 폰돌
Reference URL : http://www.shop-wiz.com
Contact Email : master@shop-wiz.com
Free Distributer : 

Copyright shop-wiz.com
*** Updating List ***
*/


//echo "count($RegOptionArr) = ".count($RegOptionArr)." <br />";
if ($action == 'delete') {   //삭제옵션시 실행				
                $VIEW_QUERY = "SELECT * FROM wizMall WHERE UID='$uid'";
				mysql$dbcon->_query($VIEW_QUERY)
                $LIST = $dbcon->_fetch_array();
				$Picture = split("\|", $LIST[Picture]);	
				 if (is_file("../wizstock/$del_Picture")) {						 
								  unlink("../wizstock/$del_Picture");
				 }		
						
unset($rePicture);
for($i=0; $i<sizeof($Picture)-1; $i++){
if ($i != $idx) {
		$rePicture .= $Picture[$i] . '|';
	}	
}		 		
						
$sql = "update wizMall set Picture='$rePicture' where UID='$uid' ";
$dbcon->_query($sql);
echo "<HTML>
<META http-equiv=\"refresh\" content =\"0;url=$PHP_SELF?menushow=$menushow&theme=$theme&uid=$uid&p=$p\">
</HTML>";
 exit;			
   			 
}else if ($action == 'writedata') {
        $Name = addslashes(chop($Name));
        $Size = addslashes($Size);
        $Color = addslashes($Color);
        $Model = addslashes(chop($Model));
        $Category = chop($Category);
        if($TextType == "checked") {$Description1 = addslashes( $Description1 );}
        else {$Description1 = htmlspecialchars($Description1);}
		$Date = mktime(date("H"),date("i"),date("s"),$Month,$Day,$Year);
$SQL_STR="select Picture from wizMall WHERE UID='$uid'";
$piclistvalue=$dbcon->get_one($SQL_STR);;
$piclist = split("\|", $piclistvalue);	
/* 파일 업로딩 시작 */
unset($Picture);
$file_field_name = "file";
file_uploade($file_field_name);
for($i=0; $i<sizeof($file); $i++){
$MicroTsmp = split(" ",microtime());
$newFileName = str_replace(".", "", $MicroTsmp[0]);
	if($file_name[$i]!="none" && $file_name[$i]){
	    $extention = strrchr($file_name[$i], ".");	
		$file_name[$i] = time()."".$extention;
		if($piclist[$i]) unlink("../wizstock/$piclist[$i]");
	   	if (file_exists("../wizstock/$file_name[$i]")) {
	    $file_name[$i] = $newFileName."_$file_name[$i]";
    	}    
	    if(!move_uploaded_file($file_tmp_name[$i], "../wizstock/$file_name[$i]")) {
    	echo "파일 업로드에 실패 하였습니다.";
	    exit;}
	$UPDIR[$i]=$file_name[$i];
	}else $UPDIR[$i]=$piclist[$i];
$Picture .=$UPDIR[$i]."|";
}
/* 파일 업로딩 끝 */
/* 등록 옵션 입력하기 */
unset($Option3);
for($i=0; $i < count($RegOptionArr); $i++){
	if(!$Multi_Option3[$i]) $Multi_Option3[$i] = "0";
	$Option3 .= $Multi_Option3[$i]."|";
}
/* omit 된 내용 : Input = '$Input', Output = '$Output', Stock = '$Stock',*/
$QUERY1 = "UPDATE wizMall SET
PID = '$uid',
Name = '$Name',
Brand = '$Brand',
CompName = '$CompName',
Price = '$Price',
Price1 = '$Price1',
WongaPrice = '$WongaPrice',
Point = '$Point',
Unit = '$Unit',
Model = '$Model',
Size = '$Size',
Color = '$Color',
Option1 = '$Option1',
Option2 = '$Option2',
Option3 = '$Option3',
Option4 = '$Option4',
Option5 = '$Option5',
Picture = '$Picture',
None = '$None',
Date = '$Date',
Description1 = '$Description1',
Description2 = '$Description2',
Description3 = '$Description3',
Category = '$Category',
TextType = '$TextType',
TextType1 = '$TextType1',
Hit = '$Hit',
GetComp = '$GetComp' WHERE UID='$uid'";
$dbcon->_query();

$QUERY1 = "UPDATE wizInputer SET
Iinputprice = '$Iinputprice',
Iunit = '$Iunit',
Icomid= '$GetComp'
WHERE Igoodscode='$uid'";
$dbcon->_query($QUERY1);

/* MultiCategory 가 있을 경우 기존 카테고리는 삭제하고 새로 추가 한다. 또한 Option3은 insert하지 않는다. */
$sqlstr = "delete from wizMall where PID <> '' and PID = '$uid' and PID <> UID";
$dbcon->_query($sqlstr);
$MultiCategoryArr = split("\|", $TmpMultiCategoryvalue);
for($i=0; $i < sizeof($MultiCategoryArr); $i++){
	if($MultiCategoryArr[$i]){
		$sqlstr = "insert into wizMall (
        PID,Name,Brand,CompName,Price,Price1,Point,Model,Size,Color,Option1,Option2,Option4,Option5,
        Picture,None,Input,Output,Stock,Date,Description1,Description2,Description3,Category,TextType,TextType1,Hit,GetComp)
        VALUES(
		'$uid','$Name','$Brand','$CompName','$Price','$Price1','$Point','$Model','$Size','$Color','$Option1','$Option2',
'$Option4','$Option5','$Picture','$None','$Input','$Output','$Stock','$Date','$Description1','$Description2','$Description3','$MultiCategoryArr[$i]','$TextType','$TextType1',
'$Hit','$GetComp')";
		$dbcon->_query($sqlstr);	
	}
}
/* MultiCategory 끝 */
        if ($back == 'none') {  //이부분은 품절상품관리 화면으로 넘어갈때 사용
        echo "<HTML>
        <META http-equiv=\"refresh\" content =\"0;url=$PHP_SELF?menushow=$menushow&theme=product/product4\">
        </HTML>";
        exit;
       }else{// 아래는 걍 제품수정에서 넘어갈때입니다.
       echo "<HTML>
      <META http-equiv=\"refresh\" content =\"0;url=$PHP_SELF?menushow=$menushow&theme=product/product2&cp=$cp&where=$where&keyword=$keyword&OPTI_LIST=$OPTI_LIST&sort=$sort&sort1=$sort1&sort2=$sort2&sorting=$sorting\">
      </HTML>";
      exit;
	  }	  
}
        if ($uid) { /* 상품 목록을 wizMall Table에서 가져옮 */
        $sqlstr = "SELECT * FROM wizMall WHERE UID='$uid'";
		$dbcon->_query($sqlstr);
        $list = $dbcon->_fetch_array();
        $list[Name] = stripslashes($list[Name]);
        $list[CompName] = stripslashes($list[CompName]);
        $list[Description1] = stripslashes($list[Description1]);
        $list[Description2] = stripslashes($list[Description2]);
		$list[Description3] = stripslashes($list[Description3]);
        $list[Model] = stripslashes($list[Model]);
		$Picture = split("\|",$list[Picture]); 
		
		/* 상품재고 및 기타 상품 공급처에 관한 정보를 가져옮 */
		$inputsqlstr = "select Iinputprice, Iunit from wizInputer where Igoodscode='$uid'";
		$dbcon->_query($inputsqlstr);
		$inputlist = $dbcon->_fetch_array();
        }
?>
<script language="Javascript1.2" >
<!-- // load htmlarea
_editor_url = "../js/";                     // URL to htmlarea files
var win_ie_ver = parseFloat(navigator.appVersion.split("MSIE")[1]);
if (navigator.userAgent.indexOf('Mac')        >= 0) { win_ie_ver = 0; }
if (navigator.userAgent.indexOf('Windows CE') >= 0) { win_ie_ver = 0; }
if (navigator.userAgent.indexOf('Opera')      >= 0) { win_ie_ver = 0; }
if (win_ie_ver >= 5.5) {
  document.write('<scr' + 'ipt src="' +_editor_url+ 'editor.js"');
  document.write(' language="Javascript1.2"></scr' + 'ipt>');  
} else { document.write('<scr'+'ipt>function editor_generate() { return false; }</scr'+'ipt>'); }
// -->
</script>
<script language=javascript>
<!--
function checkForm() {
	var f=document.goods_modify;
	var MultiCategorylen = f.TmpMultiCategory.length;
	var TmpMultivalue = '';
	for(var i=0; i< MultiCategorylen; i++){
	if(f.TmpMultiCategory.options[i]) TmpMultivalue += f.TmpMultiCategory.options[i].value + '|';
	}
	f.TmpMultiCategoryvalue.value = TmpMultivalue;
	
	if ( f.Category.value.length == 0 ) {
			alert( '등록할 카테고리를 선택해주세요' );
			f.Category.focus();
			return false;
	}
	if ( f.Name.value.length == 0 ) {
			alert( '상품의 이름을 입력해주세요' );
			f.Name.focus();
			return false;
	}
	if ( f.Price.value.length == 0 ) {
			alert( '상품의 판매가를 입력해주세요' );
			f.Price.focus();
			return false;
	}
}

function MultiCategorySelect(selObj){
	var f=document.goods_modify
	var aIdx=f.TmpMultiCategory.options.length;
	var str=selObj.options[selObj.selectedIndex].text;
	var itm= new Option(str)
	if(aIdx >= 5){
		window.alert('5개이상 카테고리 적용은 불가능합니다.');
		return false;
		exit;
	}
	f.TmpMultiCategory.options[aIdx] = itm;
	f.TmpMultiCategory.options[aIdx].value = selObj.options[selObj.selectedIndex].value
}

function DeleteMultiCat(sel){
	var f=document.goods_modify
	var selectedIndexNo = sel.selectedIndex;
	sel.options[sel.selectedIndex]=null;
}

function addToPIC()
{
	nameToDiv.insertAdjacentElement("BeforeEnd",document.createElement("<br />"));
	nameToDiv.insertAdjacentElement("BeforeEnd",document.createElement("<INPUT type='file' name='file[]' class='dd1'>"));
}

function del(obj,no,idx){
	location.href = "<?=$PHP_SELF?>?menushow=<?=$menushow?>&theme=<?=$theme?>&uid="+no+"&action=delete"+ "&del_Picture=" + obj+"&idx="+idx;    	 
}
-->
</script>
<SCRIPT LANGUAGE="JavaScript"> 
<!-- 
// 파일 첨부시 미리보기 구현
//<INPUT type='file' name='file[0]' onchange="return image_onchange(0);" id=upfile><img alt=미리보기 id=sm src="" width="largh" style="VISIBILITY: hidden"  name="imgsiz" border=1>
function AutoResize(img, flag){ 
  foto1= new Image(); 
  foto1.src=(img); 
  Controlla(img, flag); 
} 
function Controlla(img, flag){ 
  if((foto1.width!=0)&&(foto1.height!=0)){ 
    viewFoto(img, flag); 
  } 
  else{ 
    funzione="Controlla('"+img+"')"; 
    intervallo=setTimeout(funzione,20); 
  } 
} 
function viewFoto(img, flag){ 
  largh=foto1.width; 
  img_width=foto1.width;
  altez=foto1.height;
  img_height=foto1.height;
   if(largh >= 80) {
      largh = 80;
   }
   //if(altez >= 650) {
   //   altez = 450;
   //}
  var imgsiz
  document.imgsiz[flag].width = largh ;
  document.imgsiz[flag].alt = '원본 이미지사이즈 :' + img_width +'×'+ img_height ;
  //document.imgsiz.height = altez ;
  //f.sm.style.visibility="visible";
} 

function image_onchange(flag){    
	var f=document.writeForm;
	sm=new Array(); 
	upfile=new Array(); 
    if(f.upfile.value!=""){
    f.sm[flag].src=f.upfile[flag].value;
    f.sm[flag].style.visibility="visible";
    imgsize = f.upfile[flag].value;
    if(event.srcElement.value.match(/(.jpg|.jpeg|.gif|.png|.JPG|.JPEG|.GIF|.PNG)/)) {
        f.sm[flag].src = event.srcElement.value;
        f.sm[flag].style.display = '';

        if(f.sm[flag].fileSize > 1000*1024){ 
        document.images[img_pre].style.display = 'none';
        alert("1000k 이상은 업로드 하실수 없습니다.");
        }
    }
    else {
        document.images[img_pre].style.display = 'none';

        if(f.sm.fileSize ==-1){
        alert("이미지 파일만 가능합니다");
        }
    }

    AutoResize(imgsize, flag);
    }                

}


//이미지 원래크기로 팝업창 띄우기/////////////////////////////////
function AutoResize1(img){ 
  foto1= new Image(); 
  foto1.src=(img); 
  Controlla1(img); 
} 
function Controlla1(img){ 
  if((foto1.width!=0)&&(foto1.height!=0)){ 
    viewFoto1(img); 
  } 
  else{ 
    funzione="Controlla('"+img+"')"; 
    intervallo=setTimeout(funzione,20); 
  } 
} 
function viewFoto1(img){ 
  largh=foto1.width; 
  altez=foto1.height;
  if(largh >= 1024 && 768 <= altez) {
      largh = 1024;
   }
   if(largh <= 1024 && altez >= 768) {
      largh = largh + 40;
      altez = 768;
   }
   if(largh >= 1024 && altez >= 768) {
      largh = 1024;
      altez = 768;
   }
  stringa="width="+largh+",height="+altez+",left=0,top=0,scrollbars=yes"; 
  finestra=window.open(img,"",stringa);
  
} 
-->
</script>
<table class="table_outline">
  <tr>
    <td valign="top"><fieldset class="desc">
						<legend>제품 수정</legend>
						<div id="notice">[note]</div>
						<div id="comment">제품을 카테고리에 맞게 분류하여 등록하십시오.<br />
                  등록카테고리를 지정하실 때에는 가장 하위 카테고리에 등록해 주시기 바랍니다. <br />
                  스킨마다 약간식의 적용 옵션이 달라 질 수 도 있습니다.</div>
						</fieldset>
						<p></p>	
					    <form method='post' enctype='multipart/form-data' NAME='goods_modify' action='<?=$PHP_SELF?>' onsubmit='return checkForm();'>
        <INPUT TYPE=HIDDEN NAME="menushow" VALUE=<?=$menushow?>>
        <INPUT TYPE=HIDDEN NAME=theme VALUE="<?=$theme?>">
        <INPUT type=hidden name='action' value='writedata'>
        <INPUT type=hidden name='uid' value='<?=$uid?>'>
        <INPUT type=hidden name='back' value='<?=$back?>'>
        <!-- 아래는 수정모드에서 넘어온 조건(분류라던지 검색조건)을 다시 한번 보내준다 -->
        <INPUT type=hidden name='where' value='<?=$where?>'>
        <INPUT type=hidden name='keyword' value='<?=$keyword?>'>
        <INPUT type=hidden name='OPTI_LIST' value='<?=$OPTI_LIST?>'>
        <INPUT type=hidden name='sort' value='<?=$sort?>'>
        <INPUT type=hidden name='sort1' value='<?=$sort1?>'>
        <INPUT type=hidden name='sort2' value='<?=$sort2?>'>
        <INPUT type=hidden name='sorting' value='<?=$sorting?>'>
        <INPUT type=hidden name='cp' value='<?=$cp?>'>
        <!-- 다중카테고리용으로 히든 값을 보낸다. 5개 이상 보내고 싶을 경우 이 부분의 hindden 값을 조정 -->
        <INPUT type=hidden id=TmpMultiCategoryvalue name='TmpMultiCategoryvalue' value=''>
        <table class="table_main">
          <TR> 
            <TD width=96 height="25" bgColor=E0E4E8  style="padding: 0 10 0 5"> 
              등록카테고리</TD>
            <TD bgColor=#ffffff width="639">&nbsp; 
              <SELECT style="WIDTH: 270px" 
                        name=Category>
                <OPTION VALUE=''>상품등록 카테고리 선택</OPTION>
                <OPTION VALUE=''>--------------------------------------</OPTION>
                <?
$SQL_STR = "SELECT cat_no, cat_name FROM wizCategory WHERE cat_no < 100 ORDER BY cat_no ASC";
$SQL_QRY = $dbcon->_query($SQL_STR);
while($LIST=@$dbcon->_fetch_array($SQL_QRY)):
	if($LIST[cat_no]==$list[Category]) ECHO "<OPTION VALUE='$LIST[cat_no]' selected>$LIST[cat_name]</OPTION>\n";
	else ECHO "<OPTION VALUE='$LIST[cat_no]'>$LIST[cat_name]</OPTION>\n";
	$cat_no_new = substr($LIST[cat_no],4);
	$SQL_STR1 = "SELECT cat_no, cat_name FROM wizCategory WHERE cat_no < 10000 AND cat_no >= 100 AND cat_no LIKE '%$cat_no_new' ORDER BY cat_no ASC";
	$SQL_QRY1 = $dbcon->_query($SQL_STR1);
	while($LIST1=@$dbcon->_fetch_array($SQL_QRY1)):
		if($LIST1[cat_no]==$list[Category]) ECHO "<OPTION VALUE='$LIST1[cat_no]' selected>$LIST[cat_name] > $LIST1[cat_name]</OPTION>\n";
		else ECHO "<OPTION VALUE='$LIST1[cat_no]'>$LIST[cat_name]> $LIST1[cat_name]</OPTION>\n";
		$cat_no_new1 = substr($LIST1[cat_no],2);
		$SQL_STR2 = "SELECT cat_no, cat_name FROM wizCategory WHERE cat_no >= 10000 AND cat_no LIKE '%$cat_no_new1' ORDER BY cat_no ASC";
		$SQL_QRY2 = $dbcon->_query($SQL_STR2);
		while($LIST2=@$dbcon->_fetch_array($SQL_QRY2)):
		if($LIST2[cat_no]==$list[Category]) ECHO "<OPTION VALUE='$LIST2[cat_no]' selected>$LIST[cat_name] > $LIST1[cat_name] > $LIST2[cat_name]</OPTION>\n";
		else ECHO "<OPTION VALUE='$LIST2[cat_no]'>$LIST[cat_name] > $LIST1[cat_name] > $LIST2[cat_name]</OPTION>\n";
		endwhile;
	endwhile;
endwhile;	
?>
              </SELECT>
              (수정카테고리가 없을시 카테고리를 <A href="<?=$PHP_SELF?>?menushow=<?=$menushow?>&theme=catmanager/shopmanager1">등록</A> 
              하세요)</TD>
          </TR>
          <TR> 
            <TD width=96 height="25" bgColor=E0E4E8  style="padding: 0 10 0 5"> 
              다중카테고리</TD>
            <TD bgColor=#ffffff width="639"> <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr> 
                  <td width="50%" valign="top">&nbsp; <select style="WIDTH: 270px" name=Category1 onChange="MultiCategorySelect(this)">
                      <option value=''>상품등록 카테고리 선택</option>
                      <option value=''>--------------------------------------</option>
                      <?
$SQL_STR = "SELECT cat_no, cat_name FROM wizCategory WHERE cat_no < 100 ORDER BY cat_no ASC";
$SQL_QRY = $dbcon->_query($SQL_STR);
while($LIST=@$dbcon->_fetch_array($SQL_QRY)):
	if($LIST[cat_no]==$list[Category]) ECHO "<OPTION VALUE='$LIST[cat_no]' selected>$LIST[cat_name]</OPTION>\n";
	else ECHO "<OPTION VALUE='$LIST[cat_no]'>$LIST[cat_name]</OPTION>\n";
	$cat_no_new = substr($LIST[cat_no],4);
	$SQL_STR1 = "SELECT cat_no, cat_name FROM wizCategory WHERE cat_no < 10000 AND cat_no >= 100 AND cat_no LIKE '%$cat_no_new' ORDER BY cat_no ASC";
	$SQL_QRY1 = $dbcon->_query($SQL_STR1);
	while($LIST1=@$dbcon->_fetch_array($SQL_QRY1)):
		if($LIST1[cat_no]==$list[Category]) ECHO "<OPTION VALUE='$LIST1[cat_no]' selected>$LIST[cat_name] > $LIST1[cat_name]</OPTION>\n";
		else ECHO "<OPTION VALUE='$LIST1[cat_no]'>$LIST[cat_name]> $LIST1[cat_name]</OPTION>\n";
		$cat_no_new1 = substr($LIST1[cat_no],2);
		$SQL_STR2 = "SELECT cat_no, cat_name FROM wizCategory WHERE cat_no >= 10000 AND cat_no LIKE '%$cat_no_new1' ORDER BY cat_no ASC";
		$SQL_QRY2 = $dbcon->_query($SQL_STR2);
		while($LIST2=@$dbcon->_fetch_array($SQL_QRY2)):
		if($LIST2[cat_no]==$list[Category]) ECHO "<OPTION VALUE='$LIST2[cat_no]' selected>$LIST[cat_name] > $LIST1[cat_name] > $LIST2[cat_name]</OPTION>\n";
		else ECHO "<OPTION VALUE='$LIST2[cat_no]'>$LIST[cat_name] > $LIST1[cat_name] > $LIST2[cat_name]</OPTION>\n";
		endwhile;
	endwhile;
endwhile;	
?>
                    </select></td>
                  <td valign="top"><select name="TmpMultiCategory" size="5" multiple>
                      <?
$sqlsubstr = "select Category from wizMall where PID = '$uid' and UID != '$uid'";
//echo "\$sqlsubst = $sqlsubstr <br />";
$sqlsubqry = $dbcon->_query($sqlsubstr);
while($sublist = $dbcon->_fetch_array($sqlsubqry)): 
	if(($big_cat = substr($sublist[Category], -2)) > 0){
		$sqlcatstr = "select cat_name from wizCategory where cat_no = '0000$big_cat'";
		$cat_name = $dbcon->get_one($sqlcatstr);
	}
	if(($mid_cat = substr($sublist[Category], -4)) > 100){
		$sqlcatstr = "select cat_name from wizCategory where cat_no = '00$mid_cat'";
		$cat_name .= ">".$dbcon->get_one($sqlcatstr);
	}
	if(($small_cat = substr($sublist[Category], -6)) > 10000){
		$sqlcatstr = "select cat_name from wizCategory where cat_no = '$small_cat'";
		$cat_name .= ">".$dbcon->get_one($sqlcatstr);
	}
?>
                      <option value="<?=$sublist[Category]?>">
                      <?=$cat_name?>
                      </option>
                      <?
endwhile;
?>
                    </select> <input name="button" type=button onClick=DeleteMultiCat(this.form.TmpMultiCategory) value=제거> 
                    <a href="#" onClick="window.open('http://shop-wiz.com/wizmanual.php?BID=manual&mode=view&UID=2&cp=1&BOARD_NO=1&SEARCHTITLE=&searchkeyword=&category=2','OnlineManual','width=500, height=400,scrollbars=yes,resizable=yes')";> 
                    </a><a href="#" onClick="window.open('http://shop-wiz.com/wizmanual.php?BID=manual&mode=view&UID=2&cp=1&BOARD_NO=1&SEARCHTITLE=&searchkeyword=&category=2','OnlineManual','width=500, height=400,scrollbars=yes,resizable=yes')";><img src="../../wizboard/images/help.gif" width="20" height="9" border="0"></a></td>
                </tr>
              </table></TD>
          </TR>
          <TR> 
            <TD width=96 bgColor=E0E4E8 height=25 style="padding: 0 10 0 5"> 상품명</TD>
            <TD bgColor=#ffffff width="639">&nbsp; 
              <INPUT 
                        name=Name value="<?=$list[Name]?>" size=26>
              &nbsp;</TD>
          </TR>
          <TR> 
            <TD width=96 height="25" bgColor=E0E4E8 style="padding: 0 10 0 5"> 
              상품모델명</TD>
            <TD bgColor=#ffffff width="639">&nbsp; 
              <INPUT name=Model value="<?=$list[Model]?>" size=26>
              <FONT face=돋움 size=2>- 사용하지 않을경우 공백처리</FONT></TD>
          </TR>
          <TR> 
            <TD width=96 bgColor=E0E4E8 height=25 style="padding: 0 10 0 5"> 판매가</TD>
            <TD bgColor=#ffffff width="639">&nbsp; 
              <INPUT 
                        name=Price value="<?=$list[Price]?>" size=26>
              콤마(,)없이 숫자로만 입력(보기:10000)</TD>
          </TR>
          <TR> 
            <TD width=96 height="25" bgColor=E0E4E8 style="padding: 0 10 0 5"> 
              부가 포인트</TD>
            <TD bgColor=#ffffff width="639">&nbsp; 
              <INPUT name=Point value="<?=$list[Point]?>" size=26>
              이 상품에 부가할 마일리지포인트. </TD>
          </TR>
          <TR> 
            <TD width=96 bgColor=E0E4E8 height=35 style="padding: 0 10 0 5"> <P>작은그림</P></TD>
            <TD bgColor=#ffffff height=35 width="639"> <table width="583" border="0" cellpadding="0" cellspacing="0" height="18">
                <tr> 
                  <td>&nbsp; <INPUT type='file' name='file[]'></td>
                  <td class="s1"> 
                    <?if($Picture[0]):?>
                    <a href='../wizstock/<?=$Picture[0]?>' target=_blank><img src ='../wizstock/<?=$Picture[0]?>' width = 30 border="0"></a> 
                    <?=$Picture[0]?>
                    <?endif;?>
                    (권장사이즈 : 250 x 250)</td>
                </tr>
              </table>
              <br />
              (그림파일의 이름은 영문으로 표기하시기를 권장합니다.)</TD>
          </TR>
          <TR> 
            <TD width=96 bgColor=E0E4E8 height=35 style="padding: 0 10 0 5"> <P>큰그림</P></TD>
            <TD bgColor=#ffffff height=35 width="639"> <table width="583" border="0" cellpadding="0" cellspacing="0" height="18">
                <? for($i=1; $i<sizeof($Picture)-1; $i++){ ?>
                <tr> 
                  <td width="284">&nbsp; <INPUT type='file' name='file[]' class='dd1'></td>
                  <td width="295" class="s1">
                    <?if($Picture[$i]):?>
                    <a href='../wizstock/<?=$Picture[$i]?>' target=_blank><img src ='../wizstock/<?=$Picture[$i]?>' width = 30 border="0"></a> 
                    <?=$Picture[$i]?>
                    <?endif;?>
                    &nbsp;&nbsp;
                    <input type="button" value="삭제" onClick = "del('<?=$Picture[$i]?>','<?=$uid?>','<?=$i?>');"></td>
                </tr>
                <?}?>
              </table>
              <table width="579" border="0" cellpadding="0" cellspacing="0" height="18">
                <tr> 
                  <td width="256"> 
                    <div id='nameToDiv'></div>
                    </td>
                  <td width="69" class="s1" align="center"> <img src="img/chu.gif" width="68" height="20" style="cursor:pointer" value="추가하기" onClick="javascript:addToPIC() ;return false";> 
                  </td>
                  <td width="254" class="s1">&nbsp; (권장사이즈 
                    : 500 x 500) </td>
                </tr>
              </table></TD>
          </TR>
          <TR> 
            <TD width=96 bgColor=E0E4E8 rowSpan=2 style="padding: 0 10 0 5"> 옵션1</TD>
            <TD bgColor=#ffffff width="639">&nbsp; 
              <TEXTAREA name=Option1 rows=4 cols=25><?=$list[Option1]?></TEXTAREA>
              <TEXTAREA name=Example cols=25 rows=4 id="Example">보기1) 
30인치=100000 
25인치=200000 
20인치=300000 
-------------------- 
보기2) 
사이즈 
대 
중 
소 </TEXTAREA>
              </TD>
          </TR>
          <TR> 
            <TD bgColor=#ffffff width="639"> <P><br />
                차등가격설정시 : 우측(보기1)과 같이 <FONT face=돋움체 
                        size=2>"옵션=추가가격"</FONT>의 형식으로 한줄에 하나씩 입력<br />
                동일가격설정 및 옵션만 지정할 경우(보기2)에는 첫줄에는 옵션의 
                종류를, 둘째줄부터는 옵션의 내용을 입력<br />
                </P></TD>
          </TR>
          <TR> 
            <TD width=96 bgColor=E0E4E8 rowSpan=2 style="padding: 0 10 0 5"> 옵션2<br />
              (색상, 길이..)</TD>
            <TD bgColor=#ffffff width="639">&nbsp; 
              <TEXTAREA name=Option4 rows=4 cols=25><?=$list[Option4]?></TEXTAREA>
              <TEXTAREA name=Example2 cols=25 rows=4 id="Example2">색상
대 
중 
소 </TEXTAREA>
              </TD>
          </TR>
          <TR> 
            <TD bgColor=#ffffff width="639"> <P>동일가격설정 및 
                옵션만 지정할 경우(보기2)에는 첫줄에는 옵션의 종류를, 둘째줄부터는 옵션의 내용을 입력</P></TD>
          </TR>
          <TR> 
            <TD width=96 bgColor=E0E4E8 style="padding: 0 10 0 5">자세한설명 
              <INPUT type=hidden value=checked name=TextType> </TD>
            <TD bgColor=#ffffff width="639">&nbsp; 
              <TEXTAREA name=Description1 rows=20 cols=78 style="width:98%"><?=$list[Description1]?></TEXTAREA>
              <br />
               &nbsp;&nbsp;줄바꿈 : Shift + Enter &nbsp;&nbsp;&nbsp; 
              문단바꿈 : Enter</B> 
              <script language='javascript1.2'>
		editor_generate('Description1');
		</script>
               </TD>
          </TR>
          <TR> 
            <TD width=96 bgColor=E0E4E8>배송정보<br />
              <input name=TextType1 type=checkbox id="TextType1" value=checked <?=$list[TextType]?>>
              HTML사용 <DIV align=center></DIV></TD>
            <TD bgColor=#ffffff width="639"> <P>&nbsp; 
                <textarea id=Description3 name=Description3 rows=6  style="width:98%"><?=$list[Description3]?></textarea>
                <br />
                </P></TD>
          </TR>
          <TR> 
            <TD bgColor=E0E4E8 width="96" style="padding: 0 10 0 5">간단한 
              설명</TD>
            <TD bgColor=#ffffff width="639">&nbsp; 
              <TEXTAREA name=Description2 rows=3  style="width:98%"><?=$list[Description2]?></TEXTAREA>
              <br />
              <br />
              상품에 대한 간단한 설명을 넣는 곳입니다. 스킨에 따라 적용되지 않을 수도 있습니다.<br />
              </TD>
          </TR>
        </TABLE>
        <br />
        <table width="760" border="0" cellpadding="0" cellspacing="0">
          <tr> 
            <td> <div align="center">
                <input type="image" src="img/sul.gif" width="68" height="20">
              </div></td>
          </tr>
        </table>
        <br />
        　<br />
        <span class="s1">  옵션 입력사항</span> 
        <table class="table_main">
          <TR> 
            <TD width=100 bgColor=E0E4E8 style="padding: 0 10 0 5"> 브랜드<br />
              (제조사)명</TD>
            <TD bgColor=#ffffff>&nbsp; 
              <INPUT name=Brand value="<?=$list[Brand]?>" size=26 maxLength=30></TD>
          </TR>
          <TR> 
            <TD width=100 bgColor=E0E4E8 style="padding: 0 10 0 5"> 제조사</TD>
            <TD bgColor=#ffffff>&nbsp; 
              <INPUT name="CompName" value="<?=$list[CompName]?>" size=26 maxLength=30>
              </TD>
          </TR>
          <TR> 
            <TD width=100 bgColor=E0E4E8 height=25 style="padding: 0 10 0 5"> 
              유통가</TD>
            <TD bgColor=#ffffff height=25>&nbsp; 
              <INPUT name=Price1 value="<?=$list[Price1]?>" 
                        size=26 maxLength=30>
              콤마(,)없이 숫자로만 입력(보기:10000)- 사용하지 않을경우 공백처리</TD>
          </TR>
          <TR> 
            <TD width=100 height="25" bgColor=E0E4E8 style="padding: 0 10 0 5"> 
              등록옵션</TD>
            <TD bgColor=#ffffff><table width="100%" border="0" cellspacing="0" cellpadding="0" class="s1">
                <tr> 
                  <td> &nbsp;
                    <?
reset($RegOptionArr);
$Option3Arr = split("\|", $list[Option3]);
while(list($key, $value)=each($RegOptionArr)):
	if($Option3Arr[$key]) $checked = "checked";
	else unset($checked);
	echo "<input type='checkbox' name='Multi_Option3[".$key."]' value='1' $checked >".$value."&nbsp; ";
endwhile;
?>
                  </td>
                </tr>
              </table></TD>
          </TR>
          <TR> 
            <TD width=100 height="25" bgColor=E0E4E8 style="padding: 0 10 0 5"> 
              용량</TD>
            <TD bgColor=#ffffff>&nbsp; 
              <INPUT 
                        name=Option2 value="<?=$list[Option2]?>" size=26 maxLength=30>
              예) 32리터 - 실렉트일경우는 옵션1, 2 항목을 이용</TD>
          </TR>
          <TR> 
            <TD width=100 height="25" bgColor=E0E4E8 style="padding: 0 10 0 5"> 
              규격(크기)</TD>
            <TD bgColor=#ffffff>&nbsp; 
              <INPUT 
                        name=Size value="<?=$list[Size]?>" size=26 maxLength=30>
              예) 263212 - 실렉트일경우는 옵션1, 2 항목을 이용</TD>
          </TR>
          <TR> 
            <TD width=100 bgColor=E0E4E8 style="padding: 0 10 0 5"> 비교상품</TD>
            <TD bgColor=#ffffff>&nbsp;
              <INPUT name=Option5 value="<?=$list[Option5]?>">
              <input type="button" name="Button" value="찾기" onClick="window.open('product1_1search.php?mode=compare&tmpsort='+document.goods_modify.Category.value+'&mode=modify','Product_Search_Window','width=620, height=650, scrollbars=yes')"; style="cursor:pointer"></TD>
          </TR>
          <!--<TR> 
                      <TD width=100 bgColor=E0E4E8 style="padding: 0 10 0 5"> <font color="#000000">관련상품</font></TD>
                      <TD bgColor=#ffffff><font color="#000000">&nbsp; 
                        
                <TEXTAREA name=PID rows=4 cols=5><?=$list[PID]?></TEXTAREA>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                        <TEXTAREA name=textarea rows=4 cols=5>125
160
180 </TEXTAREA>
                        <br />
                        상품상세보기에서 관련상품을 디스플레이할 때 사용(관련상품 no를 상기 좌측처럼입력 )</font></TD>
                    </TR> -->
          <tr> 
            <td height="25" bgcolor=E0E4E8 style="padding: 0 10 0 5">등록일</td>
            <td bgcolor=#ffffff> 
              <?
ECHO "<select name='Year' size='1'>";
$year = date("Y");

$month = date("m");
$day = date("j");
$regyear = date("Y", $list[Date]);
$regmonth = date("m", $list[Date]);
$regday = date("d", $list[Date]);
for($i=$regyear;$i<=$year+5;$i++) {
if($regyear == $i) {
echo "<option value='$i' selected>$i</option>\n";
}
else {
echo "<option value='$i'>$i</option>\n";
}
}
echo "</select>년 <select name='Month' size='1'>";
for($i="01";$i<=12;$i++) {
if($regmonth == $i) {
echo "<option value='$i' selected>$i</option>\n";
}
else {
echo "<option value='$i'>$i</option>\n";
}
}
echo "
</select>월 <select name='Day' size='1'>";
for($i="01";$i<=31;$i++) {
if($regday == $i) {
echo "<option value='$i' selected>$i</option>\n";
}
else {
echo "<option value='$i'>$i</option>\n";
}
}
echo "</select>일";
?>
              &nbsp;<a href="#" onClick="window.open('http://shop-wiz.com/wizmanual.php?BID=manual&mode=view&UID=8&searchkeyword=&category=2','OnlineManual','width=500, height=400,scrollbars=yes,resizable=yes')";><img src="../../wizboard/images/help.gif" width="20" height="9" border="0"></a> 
              (for more info, click &quot;?&quot;)</td>
          </tr>
        </TABLE>
        <br />
        <table class="table_main">
          <tr> 
            <td width=100 height="25" bgcolor=E0E4E8 style="padding: 0 10 0 5"> 
              품절</td>
            <td bgcolor=#ffffff>&nbsp; 
              <input type=checkbox value=checked name=None <?=$list[None]?>>
              품절상품은 리스트는 되나 장바구니에 담겨지지 않습니다.</td>
          </tr>
          <TR> 
            <TD width=100 height="25" bgColor=E0E4E8 style="padding: 0 10 0 5"> 
              공급처</TD>
            <TD bgColor=#ffffff>&nbsp; <SELECT name=GetComp>
                <OPTION VALUE=''>공급거래처 없음</OPTION>
                <OPTION VALUE=''>------------------</OPTION>
                <?
$sqlcompstr = "SELECT UID,CompName,CompID FROM wizCom WHERE (CompSort = '01' or CompSort = '02' or CompSort = '03')";
$sqlcompqry = $dbcon->_query($sqlcompstr);
while( $complist = $dbcon->_fetch_array( $sqlcompqry ) ) {
unset($selected);
if(!strcmp(trim($complist[CompID]),trim($list[GetComp]))) $selected = " selected";
        ECHO "<OPTION VALUE='$complist[CompID]'$selected>$complist[CompName]</OPTION>";
}
?>
              </SELECT>
               (공급처가 없을시 공급처를 <A href="<?=$PHP_SELF?>?menushow=<?=$menushow?>&theme=basicconfig/basic_info5_1">등록</A> 
              하세요) </TD>
          </TR>
          <TR> 
            <TD width=100 bgColor=E0E4E8 height=25 style="padding: 0 10 0 5"> 
              원가 </TD>
            <TD bgColor=#ffffff height=25>&nbsp; 
              <INPUT maxLength=30 
                        size=26 name="WongaPrice" value="<?=$list[WongaPrice]?>">
              콤마(,)없이 숫자로만 입력(보기:10000) - 원 상품가</TD>
          </TR>
          <tr> 
            <td width=100 height="25" bgcolor=E0E4E8 style="padding: 0 10 0 5"> 
              단위</td>
            <td bgcolor=#ffffff>&nbsp; 
              <input size=5 name="Unit" value = "<?=$list[Unit]?>">
              (입하량의 추가/변경 일경우 <a href="#" onClick="window.open('./product2_2.php?uid=<?=$uid?>&Name=<?=$list[Name]?>&Output=<?=$list[Output]?>&Icomid=<?=$list[GetComp]?>','InputChangeWindow','width=300, height=300')";>이곳을 
              눌러</a> 변경해 주세요)</td>
          </tr>
        </table>
        <br />
        <table width="760" border="0" cellpadding="0" cellspacing="0">
          <tr> 
            <td> <div align="center">
                <input type="image" src="img/sul.gif" width="68" height="20">
              </div></td>
          </tr>
        </table>
      </form></td>
  </tr>
</table>
