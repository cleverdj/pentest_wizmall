<?
$avatar = new avatar();
$avatar->get_object($dbcon, $common);
$avatar->WIZTABLE = $WIZTABLE;
$avatar->avatarpath = "./wizavatar/avatarimg/";


$sqlstr = "select * from ".$WIZTABLE["AVATARALBUMADMIN"];
$sqlqry = mysql_query($sqlstr) or die(mysql_error()."<br>".$sqlstr);
$list = mysql_fetch_array($sqlqry);

$guest_open = $list[guest];
$use_contest = $list[contest];
$album_table_width = $list[album_table_width];
if($album_table_width < 101) $album_table_width = $album_table_width."%";
$photo_table_width = $list[photo_table_width];
if($photo_table_width < 101) $photo_table_width = $photo_table_width."%";
$photo_width_count = $list[photo_width_count];
$photo_list_count = $list[photo_list_count];
$photo_page_count = $list[photo_page_count];
$minishot_table_width = $list[minishot_table_width];
if($minishot_table_width < 101) $minishot_table_width = $minishot_table_width."%";
$minishot_width_count = $list[minishot_width_count];
$minishot_list_count = $list[minishot_list_count];
$minishot_page_count = $list[minishot_page_count];
$max_photo_num = $list[max_photo_num];

if($guest_open == "N" && !$avatar_id) 
{
  echo "
    <script>
      top.location.href='./avatar_login.php?go_url=avatar_album.php';
    </script>
   ";
  exit;
} 


//if($a_header) { include $a_header; }  // 헤더파일 인쿠르드

if($album_id)
{
  $data = mysql_num_rows(mysql_query("select no from ".$WIZTABLE["AVATARALBUM"]." where user_id = '$album_id' and contest = 0 and view = 0"));
  if(!$data) 
  {
    echo "<script>alert('앨범에 저장된 사진이 없습니다!   '); self.close(); history.go(-1);</script>";
    exit;
  }
  $photo_id = $album_id;
}
else $photo_id = $avatar_id;

$is_me = FALSE;

if(!$album_id)
{ 
  $is_me = TRUE;
  $name = add_member_info($avatar_id);
}
else $name = add_member_info($album_id);

$sqlstr = "select no from ".$WIZTABLE["AVATARALBUM"]." where (user_id = '$album_id' and no = parent)";
$sqlqry = mysql_query($sqlstr) or die(mysql_error()."<br>".$sqlstr);
$tmp1 = mysql_num_rows($sqlqry);  // 미니샷

$sqlstr = "select no from ".$WIZTABLE["AVATARALBUM"]." where (user_id = '$album_id' and parent = 0 and contest = 0 and view = 0)";
$sqlqry = mysql_query($sqlstr) or die(mysql_error()."<br>".$sqlstr);
$tmp2 = mysql_num_rows($sqlqry);  // 독사진

if(!$class)
{
  if($tmp2 == 0 and $tmp1 != 0) $class = "minishot";
  else $class = "photo";
}

if(!$page) $page=1;
?>
<SCRIPT LANGUAGE="JavaScript">
var tmp;

function showmenu(no,date,memo,ValueShow) 
{
  var rightedge = document.body.clientWidth-event.clientX;
  var bottomedge = document.body.clientHeight-event.clientY;

  if (rightedge < mymenu.offsetWidth)
      mymenu.style.left = document.body.scrollLeft + event.clientX - mymenu.offsetWidth;
  else
      mymenu.style.left = document.body.scrollLeft + event.clientX;

  if (bottomedge < mymenu.offsetHeight)
      mymenu.style.top = document.body.scrollTop + event.clientY - mymenu.offsetHeight;
  else
      mymenu.style.top = document.body.scrollTop + event.clientY;
  mymenu.style.visibility = ValueShow;

  tmp = "<table width='130' border='0' cellspacing='1' cellpadding='0' bgcolor='#888888' style='table-layout:fixed;'><tr bgcolor='#FFFFFF'><td><table border='0' cellpadding='1' cellspacing='0' width='100%' onclick=showmenu('','','','hidden')><tr onMouseOver=this.style.backgroundColor='#E6E6FA' onMouseOut=this.style.backgroundColor=''><td align='left' height='20'>&nbsp;<a href=\"javascript:void(NewWindow('avatar_album_ye.php?winmode=info&mode=member&no="+no+"&date="+date+"&memo="+memo+"";
<?if($class == "minishot") {?>tmp = tmp+"&class=minishot";<?}?>
  tmp = tmp+"','avatar_album_foot','400','420','yes'))\" onMouseOver=\"window.status=('꼬리말 보기'); return true;\">꼬리말 보기</a></td></tr><tr onMouseOver=this.style.backgroundColor='#E6E6FA' onMouseOut=this.style.backgroundColor=''><td align='left' height='20'>&nbsp;<a href=\"javascript:void(NewWindow('avatar_album_ye.php?winmode=info&mode=me&no="+no+"&date="+date+"&memo="+memo+"";
<?if($class == "minishot") {?>tmp = tmp+"&class=minishot";<?}?>
  tmp = tmp+"','avatar_album_info','350','380','no'))\" onMouseOver=\"window.status=('상세 정보 보기'); return true;\">상세 정보 보기</a></td></tr>";
<?if($class != "minishot") {?>
  tmp = tmp+"<tr onMouseOver=this.style.backgroundColor='#E6E6FA' onMouseOut=this.style.backgroundColor=''><td align='left' height='20' title='이 사진의 아이템으로 교체합니다'>&nbsp;<a href=\"./avatar_album_ye.php?winmode=ok&mode=change&no="+no+"\" onMouseOver=\"window.status=('현재모습으로 저장'); return true;\">현재모습으로 저장</a></td></tr>";
<?if($use_contest == "Y") {?>
  tmp = tmp+"<tr onMouseOver=this.style.backgroundColor='#E6E6FA' onMouseOut=this.style.backgroundColor=''><td align='left' height='20' title='컨테스트 참가하기'>&nbsp;<a href=\"javascript:NewWindow('./avatar_album_ye.php?winmode=ok&mode=contest&no="+no+"', 'contest', '10','10','no')\" onMouseOver=\"window.status=('컨테스트 참가하기'); return true;\">컨테스트 참가</a></td></tr>";
<?} }?>
  tmp = tmp+"</table></td></tr></table>";

  document.all.mymenu.innerHTML = tmp;
}

function hidemenu()
{
  if (mymenu.style.visibility == "visible")
      mymenu.style.visibility = "hidden";
}

function NewWindow(mypage, myname, w, h, scroll) 
{ 
  var winl = (screen.width - w) / 2; 
  var wint = (screen.height - h) / 2; 
  winprops = 'height='+h+',width='+w+',top='+wint+',left='+winl+',scrollbars='+scroll+',resizable' 
  win = window.open(mypage, myname, winprops) 
  if (parseInt(navigator.appVersion) >= 4) { win.window.focus(); } 
}
</script>
<!--<body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onMouseUp="hidemenu();">-->
<?
  $avatar_view = $avatar->show_avatar($photo_id);
  $point = $avatar->check_point($avatar_id);
  $h_item = mysql_num_rows(mysql_query("select no from ".$WIZTABLE["AVATARMERCHANT"]." where user_id = '$avatar_id'"));


?>
<?

  if($class == "photo")
  {
    $offset = $photo_list_count*($page-1);
?>

<table width="<?=$photo_table_width?>" border="0" cellspacing="0" cellpadding="0" align="center" onmouseover="showmenu('','','','hidden');">
  <tr>
    <td height="20" colspan="<?=$photo_width_count?>"></td>
  </tr>
  <tr>
    <td width="100%" colspan="<?=$photo_width_count?>"><table align="center" border="0" cellspacing="0" cellpadding="0" width="100%" style="table-layout:fixed;">
        <col width="170">
        </col>
        <col width="">
        </col>
        
        <tr>
          <td height="24"><img src="./<?=$avatar_skin_path?>/images/album_menu_11.gif" border="0" width="78" height="24"><a onfocus="blur()" href="./wizavatar.php?skinmode=<?=$skinmode?>&class=minishot" onMouseOver="window.status=('미니샷 보기'); return true;" title="미니샷 보기"> <img src="./<?=$avatar_skin_path?>/images/album_menu_22.gif" border="0" width="80" height="24"></a> </td>
          <td align="right"><font color="#811A01">※ 앨범은 최대 <font color="blue">
            <?=$max_photo_num?>
            </font>개 까지 저장이 가능합니다.</font> </td>
        </tr>
        <tr>
          <td bgcolor="#DEDEDE" height="10" colspan="2"></td>
        </tr>
      </table></td>
  </tr>
  <tr>
    <td height="20" colspan="<?=$photo_width_count?>"></td>
  </tr>
  <?
    $str1 = mysql_query("select no from ".$WIZTABLE["AVATARALBUM"]." where user_id = '$photo_id' and parent = 0 and contest = 0 and view = 0");

    $total_no = mysql_num_rows($str1);
    $total_page = ceil($total_no / $photo_list_count);
    $cur_no = $total_no - $photo_list_count*($page-1);
    $pagenum = $photo_page_count;
  $a_page_num = "";
  $a_prev_page = "";
  $a_next_page = "";
  $a_edge_prev_page = "";
  $a_edge_next_page = "";

  $total_block = ceil($total_page / $pagenum);
  $block = ceil($page/$pagenum);

  $first = ($block-1)*$pagenum;
  $last = $block*$pagenum;

  if($block >= $total_block) $last = $total_page; 

  $show_a_edge_prev_begin = "<!--";
  $show_a_edge_prev_end = "-->";
  $show_a_prev_begin = "<!--";
  $show_a_prev_end = "-->";
  if($block > 1) 
  { 
    $prev = $first; 

    $a_edge_prev_page = "<a onfocus=\"blur()\" href=\"avatar_album.php?page=1";
    if($headfoot=="no") $a_edge_prev_page .= "&headfoot=no";
    if($album_id) $a_edge_prev_page .= "&album_id=$album_id";
    if($class == "minishot") $a_edge_prev_page .= "&class=minishot";
    if($indi) $a_edge_prev_page .= "&indi=$indi";
    $a_edge_prev_page .= "\" onMouseOver=\"window.status=('첫 페이지로 가기'); return true;\">";

    $a_prev_page = "<a onfocus=\"blur()\" href=\"avatar_album.php?page=$prev";
    if($headfoot == "no") $a_prev_page .= "&headfoot=no";
    if($album_id) $a_prev_page .= "&album_id=$album_id";
    if($class == "minishot") $a_prev_page .= "&class=minishot";
    if($indi) $a_prev_page .= "&indi=$indi";
    $a_prev_page .= "\" onMouseOver=\"window.status=('이전으로 가기'); return true;\">";

    $show_a_edge_prev_begin = "";
    $show_a_edge_prev_end = "";
    $show_a_prev_begin = "";
    $show_a_prev_end = "";
  }

  $show_a_page_num_begin = "<!--";
  $show_a_page_num_end = "-->";
  for($pagelink = $first+1;$pagelink<=$last;$pagelink++) 
  { 
    if($pagelink == $page) $a_page_num .= " <font color=red>[$pagelink]</font> "; 
    else
    {
      $a_page_num .= "<a onfocus=\"blur()\" href=\"avatar_album.php?page=$pagelink";
      if($headfoot == "no") $a_page_num .= "&headfoot=no";
      if($album_id)$a_page_num .= "&album_id=$album_id";
      if($class == "minishot")$a_page_num .= "&class=minishot";
      if($indi)$a_page_num .= "&indi=$indi";
      $a_page_num .= "\" onMouseOver=\"window.status=(' $pagelink 번 페이지로 가기'); return true;\">[$pagelink]</a>";
    }
    $show_a_page_num_begin = "";
    $show_a_page_num_end = "";
  } 

  $show_a_edge_next_begin = "<!--";
  $show_a_edge_next_end = "-->";
  $show_a_next_begin = "<!--";
  $show_a_next_end = "-->";
  if($block < $total_block) 
  { 
    $next = $last +1; 
    $a_next_page = "<a onfocus=\"blur()\" href=\"avatar_album.php?page=$next";
    if($headfoot == "no") $a_next_page .= "&headfoot=no";
    if($album_id) $a_next_page .= "&album_id=$album_id";
    if($class == "minishot") $a_next_page .= "&class=minishot";
    if($indi) $a_next_page .= "&indi=$indi";
    $a_next_page .= "\" onMouseOver=\"window.status=('다음으로 가기'); return true;\">";

    $a_edge_next_page = "<a onfocus=\"blur()\" href=\"avatar_album.php?page=$total_page";
    if($headfoot=="no") $a_edge_next_page .= "&headfoot=no";
    if($album_id) $a_edge_next_page .= "&album_id=$album_id";
    if($class == "minishot") $a_edge_next_page .= "&class=minishot";
    if($indi) $a_edge_next_page .= "&indi=$indi";
    $a_edge_next_page .= "\" onMouseOver=\"window.status=('마지막 페이지로 가기'); return true;\">";
    $show_a_edge_next_begin = "";
    $show_a_edge_next_end = "";
    $show_a_next_begin = "";
    $show_a_next_end = "";
	
  }	
    $str2 = mysql_query("select no,user_id,date,memo from ".$WIZTABLE["AVATARALBUM"]." where (user_id = '$photo_id' and parent = 0 and contest = 0 and view = 0) order by date desc limit $offset, $photo_list_count");

    while($data1=mysql_fetch_array($str2))
    {
      $check++;
      $total_comment = mysql_num_rows(mysql_query("select no from ".$WIZTABLE["AVATARCOMMENT"]." where parent = '$data1[no]'"));
      if($total_comment) $total_comment = "[".$total_comment."]";
      else $total_comment="";
      $memo= str_replace("\r\n","&nbsp;",$data1[memo]);
	  $avatar->mode = "photo";
	  $photo_view = $avatar->show_avatar($data1[no]);
     // $photo_view = show_photo($data1[no]);
	  //echo "photo_view = $photo_view <br>";
      $a_photo_info = "<a onfocus=\"blur()\" ";
      if($avatar_id == $data1[user_id])
        $a_photo_info .= "onclick=\"showmenu('$data1[no]','$data1[date]','$memo','visible');\" style=\"cursor:hand;\">";
      elseif($avatar_id) 
        $a_photo_info .= "onclick=\"javascript:void(NewWindow('avatar_album_ye.php?winmode=info&mode=member&no=$data1[no]&date=$data1[date]&memo=$memo','avatar_album_info','400','400','yes'))\" onMouseOver=\"window.status=('상세 보기'); return true;\" style=\"cursor:hand;\">";
      else $a_photo_info = "";
      
      if($album_id) 
        $photo_save_date = date("Y-m-d",$data1[date]);
      else
        $photo_save_date = date("Y-m-d H:i:s",$data1[date]);
?>
  <td align="center" valign="top"><table width="120" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed;">
        <tr>
          <td valign="top" align="center"><?=$a_photo_info?>
            <?=$photo_view?>
            </a> </td>
        </tr>
        <tr>
          <td valign="top" align="center"><?=$photo_save_date?>
          </td>
        </tr>
        <tr>
          <td valign="top" align="center"><?=$memo?>
            <span style="font-size:7pt;color:#990099;font-family:Tahoma;">
            <?=$total_comment?>
            </span> </td>
        </tr>
      </table>
      <br>
    </td>
    <?
    }
?>
  </tr>
  <tr>
    <td colspan="<?=$photo_width_count?>" width="100%"><table border="0" cellspacing="0" cellpadding="0" width="100%">
        <tr>
          <td width="100%" height="20" align="center"><?=$show_a_edge_prev_begin?>
            <?=$a_edge_prev_page?>
            [처음]</a>
            <?=$show_a_edge_prev_end?>
            <?=$show_a_prev_begin?>
            <?=$a_prev_page?>
            [이전]</a>
            <?=$show_a_prev_end?>
            <?=$show_a_page_num_begin?>
            <?=$a_page_num?>
            <?=$show_a_page_num_end?>
            <?=$show_a_next_begin?>
            <?=$a_next_page?>
            [다음]</a>
            <?=$show_a_next_end?>
            <?=$show_a_edge_next_begin?>
            <?=$a_edge_next_page?>
            [처음]</a>
            <?=$show_a_edge_next_end?>
          </td>
        </tr>
      </table></td>
  </tr>
</table>
<?
  }elseif($class == "minishot"){
  ##############################################################################################################################################################
    $offset = $minishot_list_count*($page-1);
?>
<table width="<?=$minishot_table_width?>" border="0" cellspacing="0" cellpadding="0" align="center" onmouseover="showmenu('','','','hidden');">
  <tr>
    <td height="20" colspan="<?=$minishot_width_count?>"></td>
  </tr>
  <tr>
    <td width="100%" colspan="<?=$minishot_width_count?>"><table align="center" border="0" cellspacing="0" cellpadding="0" width="100%" style="table-layout:fixed;">
        <tr>
          <td height="24"><a onfocus="blur()" href="./wizavatar.php?skinmode=album&class=photo" onMouseOver="window.status=('독사진 보기'); return true;" title="독사진 보기"> <img src="./<?=$avatar_skin_path?>/images/album_menu_12.gif" border="0" width="78" height="24"></a><img src="./<?=$avatar_skin_path?>/images/album_menu_21.gif" border="0" width="80" height="24"> </td>
        </tr>
        <tr>
          <td bgcolor="#DEDEDE" height="10"></td>
        </tr>
      </table></td>
  </tr>
  <tr>
    <td height="20" colspan="<?=$minishot_width_count?>"></td>
  </tr>
  <?
$col_num = 0;
?>
  <?
    
    $str1 = mysql_query("select no from ".$WIZTABLE["AVATARALBUM"]." where user_id = '$photo_id' and no = parent");

    $total_no = mysql_num_rows($str1);
    $total_page = ceil($total_no / $minishot_list_count);
    $cur_no = $total_no - $minishot_list_count*($page-1);
    $pagenum = $minishot_page_count;
  $a_page_num = "";
  $a_prev_page = "";
  $a_next_page = "";
  $a_edge_prev_page = "";
  $a_edge_next_page = "";

  $total_block = ceil($total_page / $pagenum);
  $block = ceil($page/$pagenum);

  $first = ($block-1)*$pagenum;
  $last = $block*$pagenum;

  if($block >= $total_block) $last = $total_page; 

  $show_a_edge_prev_begin = "<!--";
  $show_a_edge_prev_end = "-->";
  $show_a_prev_begin = "<!--";
  $show_a_prev_end = "-->";
  if($block > 1) 
  { 
    $prev = $first; 

    $a_edge_prev_page = "<a onfocus=\"blur()\" href=\"avatar_album.php?page=1";
    if($headfoot=="no") $a_edge_prev_page .= "&headfoot=no";
    if($album_id) $a_edge_prev_page .= "&album_id=$album_id";
    if($class == "minishot") $a_edge_prev_page .= "&class=minishot";
    if($indi) $a_edge_prev_page .= "&indi=$indi";
    $a_edge_prev_page .= "\" onMouseOver=\"window.status=('첫 페이지로 가기'); return true;\">";

    $a_prev_page = "<a onfocus=\"blur()\" href=\"avatar_album.php?page=$prev";
    if($headfoot == "no") $a_prev_page .= "&headfoot=no";
    if($album_id) $a_prev_page .= "&album_id=$album_id";
    if($class == "minishot") $a_prev_page .= "&class=minishot";
    if($indi) $a_prev_page .= "&indi=$indi";
    $a_prev_page .= "\" onMouseOver=\"window.status=('이전으로 가기'); return true;\">";

    $show_a_edge_prev_begin = "";
    $show_a_edge_prev_end = "";
    $show_a_prev_begin = "";
    $show_a_prev_end = "";
  }

  $show_a_page_num_begin = "<!--";
  $show_a_page_num_end = "-->";
  for($pagelink = $first+1;$pagelink<=$last;$pagelink++) 
  { 
    if($pagelink == $page) $a_page_num .= " <font color=red>[$pagelink]</font> "; 
    else
    {
      $a_page_num .= "<a onfocus=\"blur()\" href=\"avatar_album.php?page=$pagelink";
      if($headfoot == "no") $a_page_num .= "&headfoot=no";
      if($album_id)$a_page_num .= "&album_id=$album_id";
      if($class == "minishot")$a_page_num .= "&class=minishot";
      if($indi)$a_page_num .= "&indi=$indi";
      $a_page_num .= "\" onMouseOver=\"window.status=(' $pagelink 번 페이지로 가기'); return true;\">[$pagelink]</a>";
    }
    $show_a_page_num_begin = "";
    $show_a_page_num_end = "";
  } 

  $show_a_edge_next_begin = "<!--";
  $show_a_edge_next_end = "-->";
  $show_a_next_begin = "<!--";
  $show_a_next_end = "-->";
  if($block < $total_block) 
  { 
    $next = $last +1; 
    $a_next_page = "<a onfocus=\"blur()\" href=\"avatar_album.php?page=$next";
    if($headfoot == "no") $a_next_page .= "&headfoot=no";
    if($album_id) $a_next_page .= "&album_id=$album_id";
    if($class == "minishot") $a_next_page .= "&class=minishot";
    if($indi) $a_next_page .= "&indi=$indi";
    $a_next_page .= "\" onMouseOver=\"window.status=('다음으로 가기'); return true;\">";

    $a_edge_next_page = "<a onfocus=\"blur()\" href=\"avatar_album.php?page=$total_page";
    if($headfoot=="no") $a_edge_next_page .= "&headfoot=no";
    if($album_id) $a_edge_next_page .= "&album_id=$album_id";
    if($class == "minishot") $a_edge_next_page .= "&class=minishot";
    if($indi) $a_edge_next_page .= "&indi=$indi";
    $a_edge_next_page .= "\" onMouseOver=\"window.status=('마지막 페이지로 가기'); return true;\">";
    $show_a_edge_next_begin = "";
    $show_a_edge_next_end = "";
    $show_a_next_begin = "";
    $show_a_next_end = "";
  }	
    $str2 = mysql_query("select no,user_id,date,memo,ava9 from ".$WIZTABLE["AVATARALBUM"]." where (user_id = '$photo_id' and no = parent) order by date desc limit $offset, $minishot_list_count");
    while($data1=mysql_fetch_array($str2))
    {
      $check++;
      $total_comment = mysql_num_rows(mysql_query("select no from ".$WIZTABLE["AVATARCOMMENT"]." where parent = '$data1[no]'"));
      if($total_comment) $total_comment = "[".$total_comment."]";
      else $total_comment="";
      $memo= str_replace("\r\n","&nbsp;",$data1[memo]);
      $a_photo_info = "<a onfocus=\"blur()\" ";
      if($avatar_id == $data1[user_id])
        $a_photo_info .= "onclick=\"showmenu('$data1[no]','$data1[date]','$memo','visible');\" style=\"cursor:hand;\">";
      elseif($avatar_id) 
        $a_photo_info .= "onclick=\"javascript:void(NewWindow('avatar_album_ye.php?winmode=info&mode=member&no=$data1[no]&date=$data1[date]&memo=$memo','avatar_album_info','400','400','yes'))\" onMouseOver=\"window.status=('상세 보기'); return true;\" style=\"cursor:hand;\">";
      else $a_photo_info = "";
      
      if($album_id) $photo_save_date = date("Y-m-d",$data1[date]);
      else $photo_save_date = date("Y-m-d H:i:s",$data1[date]);

      $tmp_photo = show_minishot($data1[no]);
      $photo_view = $tmp_photo[0];
      $name = $tmp_photo[1];
?>
  <td valign="top" <?if($minishot_width_count == 1){?>align="<?if($col_num%2 == 1){?>left<?} else {?>right<?}?>"<?} else {?>align="center"<?}?>><table border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td valign="top" align="center"><?=$a_photo_info?>
            <?=$photo_view?>
            </a> </td>
        </tr>
        <tr>
          <td valign="top" align="center"><?=$name?>
            [
            <?=$photo_save_date?>
            ] </td>
        </tr>
        <tr>
          <td valign="top" align="center"><table width="240" align="center" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td><?=$memo?>
                  <?=$total_comment?>
                </td>
              </tr>
            </table></td>
        </tr>
      </table>
      <br>
    </td>
    <?
    }
?>
  </tr>
  <tr>
    <td colspan="<?=$photo_width_count?>" width="100%"><table border="0" cellspacing="0" cellpadding="0" width="100%">
        <tr>
          <td width="100%" height="20" align="center"><?=$show_a_edge_prev_begin?>
            <?=$a_edge_prev_page?>
            [처음]</a>
            <?=$show_a_edge_prev_end?>
            <?=$show_a_prev_begin?>
            <?=$a_prev_page?>
            [이전]</a>
            <?=$show_a_prev_end?>
            <?=$show_a_page_num_begin?>
            <?=$a_page_num?>
            <?=$show_a_page_num_end?>
            <?=$show_a_next_begin?>
            <?=$a_next_page?>
            [다음]</a>
            <?=$show_a_next_end?>
            <?=$show_a_edge_next_begin?>
            <?=$a_edge_next_page?>
            [마지막]</a>
            <?=$show_a_edge_next_end?>
          </td>
        </tr>
      </table></td>
  </tr>
</table>
<?
  }
?>
</td>
</tr>
</table>
<div id="mymenu"></div>
