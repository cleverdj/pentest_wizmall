<?
/* 
powered by 폰돌
Reference URL : http://www.shop-wiz.com
Contact Email : master@shop-wiz.com
Free Distributer : 
Copyright shop-wiz.com
*** Updating List ***
*/
include ("../../../config/db_info.php");
include ("../../../lib/cfg.common.php");
include ("../../../lib/class.common.php");
$common = new common();

include ("../../../lib/class.database.php");
$dbcon	= new database($cfg["sql"]);

include ("../../../lib/class.board.php");
$board = new board();
$board->get_object($dbcon, $common);

##아바타 관련 테이블 정의
## 주석처리는 기존 위즈몰과 중복
//$WIZTABLE["CATEGORY"]="wizCategory";
$WIZTABLE["AVATARITEM"]="wizAvatarItem";
$WIZTABLE["AVATARALBUM"]="wizAvatarAlbum";
$WIZTABLE["AVATARMEMCONFIG"]="wizAvatarMemConfig";
$WIZTABLE["AVATARCOMMENT"]="wizAvatarComment";
$WIZTABLE["AVATARMERCHANT"]="wizAvatarMerchant";
$WIZTABLE["AVATARFACE"]="wizAvatarFace";
$WIZTABLE["AVATARZZIM"]="wizAvatarZzim";
$WIZTABLE["AVATARSCORE"]="wizAvatarScore";
$WIZTABLE["AVATARCONTESTTERM"]="wizAvatarContestTerm";

//$WIZTABLE["AVATARMEMBER"]="wizMembers";
//$WIZTABLE["AVATARMEMBER1"]="wizMembers_ind";
//$WIZTABLE["AVATARPOINT"]="wizPoint";

$WIZTABLE["IMAGE"]="wizAvatarImg";
$WIZTABLE["AVATARADMIN"]="wizAvatarAdmin";
$WIZTABLE["AVATARALBUMADMIN"]="wizAvatarAlbumAdmin";


/////////////////////////// 테이블 관련 기본 
$WIZTABLE["MAIN"] = "wizTable_Main";
$WIZTABLE["GROUP"] = "wizTable_Grp";
$WIZTABLE["BOARDCATEGORY"] = "wizTable_Category";
/*

$DB_CONNECT = mysql_connect($db_host, $db_user, $db_password);
$result = mysql_select_db($USER_DB, $DB_CONNECT);
if ( !$DB_CONNECT || !$result ) {
echo "<SCRIPT LANGUAGE=JAVASCRIPT>
window.alert('\\n\\nMYSQL 관련 입력정보가 일치하지 않아, 프로그램을 설치할 수 없습니다.\\n\\n입력정보를 다시한번 확인해 주십시오.\\n\\n');
history.back();
</SCRIPT>";
exit;}
$fp = fopen("../../config/db_connect.php", "w");
fwrite($fp,"<?	
	\$DB_CONNECT = mysql_connect(\$MYSQL_HOST, \$MYSQL_ID, \$MYSQL_PASSWORD);
	mysql_select_db(\$MYSQL_DB, \$DB_CONNECT);
	if ( !\$DB_CONNECT ) {echo \"mysql 데이터 베이스에 연결할 수 없습니다.\"; exit;}
?>");
fclose($fp);
$fp = fopen("../../config/db_info.php", "w");
fwrite($fp,"<?
\$MYSQL_HOST = \"$db_host\";
\$MYSQL_DB = \"$USER_DB\";
\$MYSQL_ID = \"$db_user\";
\$MYSQL_PASSWORD = \"$db_password\";
##아바타 관련 테이블 정의
\$WIZTABLE[\"CATEGORY\"]=\"wizAvatarCategory\";
\$WIZTABLE[\"AVATARITEM\"]=\"wizAvatarItem\";
\$WIZTABLE[\"AVATARALBUM\"]=\"wizAvatarAlbum\";
\$WIZTABLE[\"AVATARMEMCONFIG\"]=\"wizAvatarMemConfig\";
\$WIZTABLE[\"AVATARCOMMENT\"]=\"wizAvatarComment\";
\$WIZTABLE[\"AVATARMERCHANT\"]=\"wizAvatarMerchant\";
\$WIZTABLE[\"AVATARFACE\"]=\"wizAvatarFace\";
\$WIZTABLE[\"AVATARZZIM\"]=\"wizAvatarZzim\";
\$WIZTABLE[\"AVATARSCORE\"]=\"wizAvatarScore\";
\$WIZTABLE[\"AVATARCONTESTTERM\"]=\"wizAvatarContestTerm\";

\$WIZTABLE[\"AVATARMEMBER\"]=\"wizMembers\";
\$WIZTABLE[\"AVATARMEMBER1\"]=\"wizMembers_ind\";
\$WIZTABLE[\"AVATARPOINT\"]=\"wizPoint\";

\$WIZTABLE[\"IMAGE\"]=\"wizAvatarImg\";
\$WIZTABLE[\"AVATARADMIN\"]=\"wizAvatarAdmin\";
\$WIZTABLE[\"AVATARALBUMADMIN\"]=\"wizAvatarAlbumAdmin\";
?>");
fclose($fp);

*/
/* 메인테이블(생성테이블이 입력되는 테이블) 생성 ********************************************************************************************/
$result = $dbcon->is_table( $WIZTABLE["MAIN"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE `".$WIZTABLE["MAIN"]."` (";
	$sqlstr .= "`UID` int(10) NOT NULL auto_increment,";
	$sqlstr .= "`BID` varchar(50) NOT NULL default '',";
	$sqlstr .= "`GID` varchar(20) NOT NULL default 'root',";
	$sqlstr .= "`BoardDes` varchar(250) NOT NULL default '',";
	$sqlstr .= "`AdminName` varchar(250) NOT NULL default '',";
	$sqlstr .= "`Pass` varchar(50) NOT NULL default '',";
	$sqlstr .= "`Grade` char(1) NOT NULL default '',";
	$sqlstr .= "`Grp` int(5) NOT NULL default '0',";
	$sqlstr .= "`Wdate` int(10) NOT NULL default '0',";
	$sqlstr .= "PRIMARY KEY  (`UID`)";
	$sqlstr .= ")";
	//$dbcon->_query($sqlstr);
	
	$sqlstr = "INSERT INTO ".$WIZTABLE["MAIN"]." VALUES (1, '', '', '','$admin', '$PASS', 'A', '', ".time().")";
	//$dbcon->_query($sqlstr);
}

/* 그룹테이블 생성 ********************************************************************************************/	
$result = $dbcon->is_table( $WIZTABLE["GROUP"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE ".$WIZTABLE["GROUP"]." (";
	$sqlstr .= "UID int(10) NOT NULL auto_increment,";
	$sqlstr .= "GID VARCHAR(20) DEFAULT '' NOT NULL,";
	$sqlstr .= "AdminName varchar(250) NOT NULL default '',";
	$sqlstr .= "Pass varchar(50) NOT NULL default '',";
	$sqlstr .= "Grade char(1) NOT NULL default '',";
	$sqlstr .= "GrpName varchar(50) NOT NULL default '',";
	$sqlstr .= "GrpCode varchar(20) NOT NULL default '',";
	$sqlstr .= "Mdate int(10) NOT NULL default '0',";
	$sqlstr .= "PRIMARY KEY  (UID),";
	$sqlstr .= "UNIQUE KEY GrpCode (GrpCode)";
	$sqlstr .= ") ";

	//$sqlstr = "INSERT INTO wizTable_Grp VALUES (1, '', '', '', '일반게시판', 'w', ".time().")";
	//mysql_query($sqlstr, $DB_CONNECT) or dberror($sqlstr);
	//$dbcon->_query($sqlstr);
}


/* wizTable_Category 테이블생성 ********************************************************************************************/	
$result = $dbcon->is_table( $WIZTABLE["BOARDCATEGORY"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["BOARDCATEGORY"]."` (";
	$sqlstr .= "`uid` int(10) NOT NULL auto_increment,";
	$sqlstr .= "`bid` varchar(50) NOT NULL default '',";
	$sqlstr .= "`gid` varchar(20) NOT NULL default 'root',";
	$sqlstr .= "`ordernum` int(5) NOT NULL default '0',";
	$sqlstr .= "`catname` varchar(100) NOT NULL default '',";
	$sqlstr .= "PRIMARY KEY  (`uid`)";
	$sqlstr .= ")";
	//$dbcon->_query($sqlstr);
}




/* wizCategory 테이블생성 ********************************************************************************************/	
$result = $dbcon->is_table( $WIZTABLE["CATEGORY"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["CATEGORY"]."` (";
	$sqlstr .= "`UID` int(5) NOT NULL auto_increment,";
	$sqlstr .= "`cat_order` int(3) default '0',";//카테고리 순서
	$sqlstr .= "`cat_flag` varchar(20) NOT NULL default 'wizmall',";//카테고리flag
	$sqlstr .= "`cat_no` varchar(15) default NULL,";//뒷자리부터 3자리씩 1차/2차/3차...분류
	$sqlstr .= "`cat_name` varchar(30) default NULL,";//카테고리명
	$sqlstr .= "`cat_price` varchar(13) default NULL,";//카테고리별 차등 가격
	$sqlstr .= "`cat_skin` varchar(30) default NULL,";//카테고리별 제품리스트 스킨
	$sqlstr .= "`cat_skin_viewer` varchar(30) default NULL,";//카테고리별 제품 viewer 스킨
	$sqlstr .= "`cat_top` mediumtext,";//카테고리별 top 코딩
	$sqlstr .= "`cat_bottom` mediumtext,";//카테고리별 bottom 코딩
	$sqlstr .= "`cat_img` varchar(50) default NULL,";//카테고리별 이미지
	$sqlstr .= "`pcnt` int(7) default '0',";//카테고리별 제품등록수
	$sqlstr .= "PRIMARY KEY  (`UID`)";
	$sqlstr .= ")";
	//$dbcon->_query($sqlstr);

	
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '1', 'avatar', 010, '패션샵', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '2', 'avatar', 020, '미용샵', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '3', 'avatar', 030, '소품샵', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '4', 'avatar', 040, '테마샵', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '1', 'avatar', 010010, '상의', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '2', 'avatar', 020010, '하의', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '3', 'avatar', 030010, '한벌의상', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '4', 'avatar', 040010, '커플의상', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '5', 'avatar', 050010, '캐릭터', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '1', 'avatar', 010020, '헤어샵', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '1', 'avatar', 010030, '악세사리', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '2', 'avatar', 020030, '배경', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '13', 'avatar', 010040, '캐릭터', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
	$sqlstr = "INSERT INTO `wizCategory` VALUES ('', '14', 'avatar', 020040, '연예인', NULL, NULL, NULL, NULL, NULL, NULL, '');";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARITEM"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARITEM"]."` (";
	$sqlstr .= "`no` int(11) NOT NULL auto_increment,";
	$sqlstr .= "`name` varchar(30) NOT NULL default '',";
	$sqlstr .= "`filename1` varchar(35) NOT NULL,";
	$sqlstr .= "`filename2` varchar(35) NOT NULL,";
	$sqlstr .= "`filename3` varchar(35) NOT NULL,";
	$sqlstr .= "`gender` char(1) default '0',";
	$sqlstr .= "`category` varchar(15) NOT NULL,";
	$sqlstr .= "`memo` text NOT NULL,";
	$sqlstr .= "`layer` int(2) NOT NULL default '0',";
	$sqlstr .= "`reg_name` varchar(50) NOT NULL default '',";
	$sqlstr .= "`reg_home` varchar(50) NOT NULL default '',";
	$sqlstr .= "`reg_id` varchar(20) NOT NULL default '',";
	$sqlstr .= "`buy_p` varchar(20) NOT NULL default '0',";
	$sqlstr .= "`sale_p` varchar(20) NOT NULL default '0',";
	$sqlstr .= "`jaego` int(20) NOT NULL default '0',";
	$sqlstr .= "`face_show` char(1) NOT NULL default '',";
	$sqlstr .= "`reg_option` varchar(20) NOT NULL,";
	$sqlstr .= "`ref_item` varchar(200) NOT NULL,";
	$sqlstr .= "`theme_item` varchar(100) default NULL,";
	$sqlstr .= "`hitcnt` int(11) default '0',";
	$sqlstr .= "`wdate` int(11) default '0',";
	$sqlstr .= "PRIMARY KEY  (`no`),";
	$sqlstr .= "KEY `name` (`name`)";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}


$result = $dbcon->is_table( $WIZTABLE["IMAGE"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["IMAGE"]."` (";
	$sqlstr .= "`uid` int(10) NOT NULL auto_increment,";
	$sqlstr .= "`pid` int(11) NOT NULL default '0',";
	$sqlstr .= "`pname` varchar(20) NOT NULL default '',";
	$sqlstr .= "`imgname` varchar(50) NOT NULL default '',";
	$sqlstr .= "`orderflag` int(2) NOT NULL,";
	$sqlstr .= "`wdate` int(11) NOT NULL default '0',";
	$sqlstr .= "PRIMARY KEY  (`uid`)";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARADMIN"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARADMIN"]."` (";
	$sqlstr .= "`header` varchar(255) NOT NULL default '',";
	$sqlstr .= "`footer` varchar(255) NOT NULL default '',";
	$sqlstr .= "`zero_point` char(1) NOT NULL default '0',";
	$sqlstr .= "`skin` varchar(255) NOT NULL default ''";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARALBUM"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARALBUM"]."` (";
	$sqlstr .= "`no` int(11) NOT NULL auto_increment,";
	$sqlstr .= "`user_id` varchar(20) NOT NULL default '',";
	$sqlstr .= "`date` int(11) default '0',";
	$sqlstr .= "`memo` varchar(255) NOT NULL default '',";
	$sqlstr .= "`contest_memo` varchar(250) NOT NULL,";
	$sqlstr .= "`ava1` int(11) default '0',";
	$sqlstr .= "`ava2` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava3` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava4` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava5` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava6` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava7` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava8` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava9` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava10` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava11` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava12` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava13` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava14` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava15` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava16` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava17` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava18` int(11) NOT NULL default '0',";
	$sqlstr .= "`ava19` int(11) NOT NULL default '0',";
	$sqlstr .= "`parent` int(11) default '0',";
	$sqlstr .= "`size` char(3) NOT NULL default '',";
	$sqlstr .= "`loc_left` int(3) NOT NULL default '0',";
	$sqlstr .= "`loc_top` int(3) NOT NULL default '0',";
	$sqlstr .= "`zindex` char(3) NOT NULL default '',";
	$sqlstr .= "`thread` int(1) NOT NULL default '0',";
	$sqlstr .= "`contest` int(2) NOT NULL default '0',";
	$sqlstr .= "`cdate` int(11) NOT NULL,";
	$sqlstr .= "`score` int(5) NOT NULL default '0',";
	$sqlstr .= "`adminscore` int(5) NOT NULL,";
	$sqlstr .= "`rec_no` text NOT NULL,";
	$sqlstr .= "`view` int(2) NOT NULL default '0',";
	$sqlstr .= "PRIMARY KEY  (`no`),";
	$sqlstr .= "KEY `user_id` (`user_id`)";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARALBUMADMIN"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARALBUMADMIN"]."` (";
	$sqlstr .= "`no` int(11) NOT NULL auto_increment,";
	$sqlstr .= "`guest` char(1) NOT NULL default '',";
	$sqlstr .= "`contest` char(1) NOT NULL default '',";
	$sqlstr .= "`album_table_width` int(4) NOT NULL default '0',";
	$sqlstr .= "`photo_table_width` int(4) NOT NULL default '0',";
	$sqlstr .= "`photo_width_count` int(3) NOT NULL default '0',";
	$sqlstr .= "`photo_list_count` int(3) NOT NULL default '0',";
	$sqlstr .= "`photo_page_count` int(3) NOT NULL default '0',";
	$sqlstr .= "`minishot_table_width` int(4) NOT NULL default '0',";
	$sqlstr .= "`minishot_width_count` int(3) NOT NULL default '0',";
	$sqlstr .= "`minishot_list_count` int(3) NOT NULL default '0',";
	$sqlstr .= "`minishot_page_count` int(3) NOT NULL default '0',";
	$sqlstr .= "`max_photo_num` int(10) NOT NULL default '0',";
	$sqlstr .= "`avatar_size_min` int(10) NOT NULL default '0',";
	$sqlstr .= "`avatar_size_max` int(10) NOT NULL default '0',";
	$sqlstr .= "PRIMARY KEY  (`no`)";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARMEMCONFIG"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARMEMCONFIG"]."` (";
	$sqlstr .= "`no` int(11) NOT NULL auto_increment,";
	$sqlstr .= "`user_id` varchar(20) NOT NULL default '',";
	$sqlstr .= "`user_pwd` varchar(20) NOT NULL default '',";
	$sqlstr .= "`name` varchar(20) NOT NULL default '',";
	$sqlstr .= "`gender` char(1) default '1',";
	$sqlstr .= "`point` int(10) NOT NULL default '0',";
	$sqlstr .= "`ava1` int(11) default '0',";
	$sqlstr .= "`ava2` int(11) default '0',";
	$sqlstr .= "`ava3` int(11) default '0',";
	$sqlstr .= "`ava4` int(11) default '0',";
	$sqlstr .= "`ava5` int(11) default '0',";
	$sqlstr .= "`ava6` int(11) default '0',";
	$sqlstr .= "`ava7` int(11) default '0',";
	$sqlstr .= "`ava8` int(11) default '0',";
	$sqlstr .= "`ava9` int(11) default '0',";
	$sqlstr .= "`ava10` int(11) default '0',";
	$sqlstr .= "`ava11` int(11) default '0',";
	$sqlstr .= "`ava12` int(11) default '0',";
	$sqlstr .= "`ava13` int(11) default '0',";
	$sqlstr .= "`ava14` int(11) NOT NULL,";
	$sqlstr .= "`ava15` int(11) NOT NULL,";
	$sqlstr .= "`ava16` int(11) NOT NULL,";
	$sqlstr .= "`ava17` int(11) NOT NULL,";
	$sqlstr .= "`ava18` int(11) NOT NULL,";
	$sqlstr .= "`ava19` int(11) NOT NULL,";
	$sqlstr .= "PRIMARY KEY  (`no`)";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARCOMMENT"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARCOMMENT"]."` (";
	$sqlstr .= "`no` int(11) NOT NULL auto_increment,";
	$sqlstr .= "`ano` int(11) default '0',";
	$sqlstr .= "`user_id` varchar(16) NOT NULL default '',";
	$sqlstr .= "`name` varchar(20) NOT NULL default '',";
	$sqlstr .= "`memo` text NOT NULL,";
	$sqlstr .= "`faceicon` varchar(50) default NULL,";
	$sqlstr .= "`wdate` int(11) default '0',";
	$sqlstr .= "PRIMARY KEY  (`no`),";
	$sqlstr .= "KEY `parent` (`ano`)";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARMERCHANT"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARMERCHANT"]."` (";
	$sqlstr .= "`no` int(11) NOT NULL auto_increment,";
	$sqlstr .= "`user_id` varchar(30) NOT NULL default '',";
	$sqlstr .= "`item_no` varchar(20) NOT NULL default '',";
	$sqlstr .= "`b_date` int(11) NOT NULL,";
	$sqlstr .= "`p_flag` char(1) NOT NULL default '0',";
	$sqlstr .= "`p_user_id` varchar(30) NOT NULL default '',";
	$sqlstr .= "`p_read` char(1) NOT NULL default '0',";
	$sqlstr .= "`p_date` int(11) default NULL,";
	$sqlstr .= "PRIMARY KEY  (`no`),";
	$sqlstr .= "KEY `user_id` (`user_id`),";
	$sqlstr .= "KEY `item_no` (`item_no`)";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARFACE"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARFACE"]."` (";
	$sqlstr .= "`no` int(11) NOT NULL auto_increment,";
	$sqlstr .= "`item_id` int(11) NOT NULL,";
	$sqlstr .= "`face01` varchar(30) NOT NULL default '',";
	$sqlstr .= "`face01a` varchar(30) NOT NULL,";
	$sqlstr .= "`face02` varchar(30) NOT NULL default '',";
	$sqlstr .= "`face02a` varchar(30) NOT NULL,";
	$sqlstr .= "`face03` varchar(30) NOT NULL default '',";
	$sqlstr .= "`face03a` varchar(30) NOT NULL,";
	$sqlstr .= "`face04` varchar(30) NOT NULL default '',";
	$sqlstr .= "`face04a` varchar(30) NOT NULL,";
	$sqlstr .= "`face05` varchar(30) NOT NULL,";
	$sqlstr .= "`face05a` varchar(30) NOT NULL,";
	$sqlstr .= "PRIMARY KEY  (`no`)";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARZZIM"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARZZIM"]."` (";
	$sqlstr .= "`no` int(11) NOT NULL auto_increment,";
	$sqlstr .= "`user_id` varchar(30) NOT NULL default '',";
	$sqlstr .= "`item_no` varchar(20) NOT NULL default '',";
	$sqlstr .= "`wdate` int(11) NOT NULL,";
	$sqlstr .= "PRIMARY KEY  (`no`),";
	$sqlstr .= "UNIQUE KEY `index_user_id_item_no` (`user_id`,`item_no`)";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARSCORE"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARSCORE"]."` (";
	$sqlstr .= "`no` int(11) NOT NULL auto_increment,";
	$sqlstr .= "`ano` int(11) NOT NULL default '0',";
	$sqlstr .= "`user_id` varchar(16) NOT NULL default '',";
	$sqlstr .= "`score` int(2) NOT NULL default '0',";
	$sqlstr .= "`wdate` int(11) default '0',";
	$sqlstr .= "PRIMARY KEY  (`no`),";
	$sqlstr .= "UNIQUE KEY `unique_ano_userid` (`ano`,`user_id`)";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARCONTESTTERM"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARCONTESTTERM"]."` (";
	$sqlstr .= "`no` int(11) NOT NULL auto_increment,";
	$sqlstr .= "`subject` varchar(100) NOT NULL default '',";
	$sqlstr .= "`sdate` int(11) default '0',";
	$sqlstr .= "`edate` int(11) default '0',";
	$sqlstr .= "`attached` varchar(100) NOT NULL,";
	$sqlstr .= "`memo` text NOT NULL,";
	$sqlstr .= "`wdate` int(11) default '0',";
	$sqlstr .= "PRIMARY KEY  (`no`)";
	$sqlstr .= ")";
	$dbcon->_query($sqlstr);
}

$result = $dbcon->is_table( $WIZTABLE["AVATARPOINT"] );
if ( !$result) {
	$sqlstr = "CREATE TABLE IF NOT EXISTS  `".$WIZTABLE["AVATARPOINT"]."` (";
	$sqlstr .= "`uid` int(10) NOT NULL auto_increment,";
	$sqlstr .= "`id` varchar(20) NOT NULL default '',";
	$sqlstr .= "`contents` varchar(100) NOT NULL default '',";
	$sqlstr .= "`point` int(10) NOT NULL default '0',";
	$sqlstr .= "`flag` char(2) NOT NULL default '',";
	$sqlstr .= "`wdate` int(10) NOT NULL default '0',";
	$sqlstr .= "PRIMARY KEY  (`uid`)";
	$sqlstr .= ")";
	//$dbcon->_query($sqlstr);
}



//디렉토리 생성목록
$path = "../../../config/wizavatar";//
$common->mkfolder($path);

$path = "../../../config/wizavatar/session";//개인정보
$common->mkfolder($path);

$path = "../../../config/wizavatar/avatarimg";//아바타 업로드 폴더
$common->mkfolder($path);

$path = "../../../config/wizavatar/avatarimg/etc_img";//이벤트/베너 관련 폴더
$common->mkfolder($path);

$path = "../../../config/wizavatar/avatarimg/face_img";//얼굴모양관련 폴더
$common->mkfolder($path);

$path = "../../../config/wizavatar/avatarimg/face_name";//얼굴모양관련 폴더
$common->mkfolder($path);
?>

<HTML><HEAD>
<SCRIPT language=javascript>
        window.alert('\n\n<? echo $admin ; ?>님 Shop-wiz Data Base 및 디렉토리 설치가 완료되었습니다.\n\n상세 정보페이지 설정으로 이동합니다.. \n\n');
        window.top.location.replace('./install4.php?PASS=<?=$PASS?>&query=setcookie');
</SCRIPT>
