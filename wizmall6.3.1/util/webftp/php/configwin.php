<?php
/**
* 메세지 창을 띄운다
*
* @filename : php/configwin.php
* @version  : v 1.0 2002.11.06 17:40
* @author   : nsl <smpoem@magicn.com>
*/

$_HEADER_TITLE = ':: 환경 설정 :: ';

$_SKYDIR_URL = '../';

// 기본 설정 초기화
include '../common/skydir_init.php';

if (empty($fcode)) $fcode = 'init';

if ($wmode == "win")
    $bodyOnload = 'OnLoad="self.focus();window.onblur=function(){ if(!opener.closed) window.focus()};"';

include '../class/sky_html_class.php';

// html 시작부
include (HEADER_FILE);

?>
<script language="javascript">
<!--

    function setWinClose() {

        if ( opener.closed )  window.close()
    }
//   setInterval("setWinClose()", 100); 


    function goConfig(code) {

        location.href= '<?=$_SERVER[PHP_SELF]?>' + '?wmode=<?=$wmode?>&code=' + code;        
    }

    // 환경설정 - select 박스로 사용하던 부분 (현재 사용안함)
    function goConfigSlt() {

   	   var sltVal = document.smenu.menu.selectedIndex; // 선택된 값
	   var code   = document.smenu.menu.options[sltVal].value;

       location.href= '<?=$_SERVER[PHP_SELF]?>' + '?wmode=<?=$wmode?>&code=' + code;        
    }

    // uconfig_save.php 에도 있음
    function configWinClose() {

       var cd =  parent.opener.top.right.layerCode.cd.value;

       parent.opener.top.dtop.location.href =  '../main/<?=$dcfg->topFile?>' + '?cd=' + cd;
       parent.opener.top.left_top.location.href =  '../main/left_top.php' + '?cd=' + cd;
       parent.opener.top.left.location.href =  '../main/<?=$dcfg->leftFile?>' + '?cd=' + cd;
       parent.opener.top.right.location.href = '../main/<?=$dcfg->rightFile?>?rf=1' + '&cd=' + cd;
      //parent.opener.top.location.reload();
       window.close();
    }
    <?
    if ($reload) {
    ?>
//       parent.opener.top.location.reload();
    <? } ?>


//-->
</script>
</head>
<body  leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" bgcolor="<?=$rcfg->winColor?>" <?=$bodyOnload?> <?=$dcfg->body?>>
<table border=0 cellpadding=0 cellspacing=0 width=98% height=98% align=center style="margin:5px">
<tr>

  <td height=15>

  <table border=0 cellpadding=0 cellspacing=0 style="margin:0px">
  <tr>
    <td width=10>
     <input type=button name=config_init value="<?=$lg->configGeneral?>" OnClick="goConfig('config_init')" style="height:25px;width:93px">
    </td>
    <td width=5></td>
    <td width=10>
     <input type=button name=config_user value="<?=$lg->configUserInfo?>"  OnClick="goConfig('config_user')" style="height:25px;width:93px">
    </td>
    <td width=5></td>
    <td width=10>
     <input type=button name=config_ascii value="<?=$lg->configAscii?>"  OnClick="goConfig('config_ascii')" style="height:25px;width:93px">
    </td>
    <td width=5></td>
    <td width=10>
     <input type=button name=config_options value="<?=$lg->configOptions?>"  OnClick="goConfig('config_options')" style="height:25px;width:93px">
    </td>
    <td width=5></td>
    <td>
     <input type=button name=config_logs value="<?=$lg->configLogs?>"  OnClick="goConfig('config_logs')" style="height:25px;width:93px">    
    </td>
    <td width=5>
    <td></td>
  </tr>
   <tr>
    <td width=10>
     <input type=button name=config_background value="<?=$lg->configBackground?>" OnClick="goConfig('config_background')" style="height:25px;width:93px">
    </td>
    <td width=5></td>
    <td>
     <input type=button name=config_image value="<?=$lg->configImage?>" OnClick="goConfig('config_image')" style="height:25px;width:93px">
    </td>
    <td width=5></td>
    <td>

    </td>
    <td width=5></td>
    <td>

    </td>
    <td width=5></td>
    <td>

    </td>
    <td width=5>
    <td></td>
  </tr>
  </table>

  </td>
</tr>
<tr>
  <td>
<?

    switch($code) {

        // 환경설정
        case 'config_init' : include 'config_init.php'; break;

        // 사용자 정보
        case 'config_user' : include 'config_user.php'; break;

        // 텍스트 확장자
        case 'config_ascii' : include 'config_ascii.php'; break;

        // 선택사항
        case 'config_options' : include 'config_options.php'; break;

        // 배경
        case 'config_background' : include 'config_background.php'; break;

        // 로그
        case 'config_logs' : include 'config_logs.php'; break;

        // 이미지관련
        case 'config_image' : include 'config_image.php'; break;

        default :

    } // switch End

?>
  </td>
</tr>
<tr>
  <td height=30 valign=middle>

  <table border=0 cellpadding=0 cellspacing=0 valign=middle  align=center width=95%>
  <tr>
    <td height=5></td>
  </tr>
  <tr>
    <td align=right>
      <input type=submit value=" <?=$lg->butOk?> "     class=but_config> 
      <input type=button value=" <?=$lg->butCancel?> " class=but_config OnClick="configWinClose()"> 
      <input type=button value=" <?=$lg->butApply?> "  class=but_config name=applyBut disabled OnClick="applyCheck()"> 
    </td>

    </form>
  </tr>
<!--  <tr>
    <td height=10></td>
  </tr>
  <tr>
    <td align=center><?=$dcfg->pgCopyright?></td>
  </tr>
  <tr>
    <td height=3></td>
  </tr> -->
  </table>

</tr>
<tr>
  <td height=5></td>
</tr>
</table>
<script language="javascript">
<!--

    isSubmit = true;
    // 적용버튼 클릭시
    function applyCheck() {

        var f = document.input;
        f.apply.value = 'ok';
        
        inputCheck();

        if (isSubmit)
            f.submit();
    }

    // 적용버튼 활성화
    function setApplyBut() {

        document.input.applyBut.disabled = false;
    }

    <?
    if ($code != 'config_background' && $code != 'config_logs' ) {
    ?>
        eval("<?=$code?>" + ".disabled = true");
    <? } ?>
//-->
</script>
</body>
</html>