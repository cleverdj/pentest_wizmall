<?php
/**
* 디렉토리 만들기, 파일 올리기 창
*
* @filename : php/file_win.php
* @version  : v 1.0 2002.04.18 13:25
* @author   : nsl <smpoem@magicn.com>
*/

$_HEADER_TITLE = ':: 디렉토리, 파일 :: ';

$_SKYDIR_URL = '../';

// 기본 설정 초기화
include '../common/skydir_init.php';

if (empty($fcode)) $fcode = 'init';

if ($wmode == "win")
    $bodyOnload = 'OnLoad="self.focus();window.onblur=function(){ if(!opener.closed) window.focus()};"';

include '../class/sky_html_class.php';


// select 메뉴 
$cSltMenu = array('config_background' => $lg->configBackground,
                  'config_logs' => $lg->configLogs);


// html 시작부
include (HEADER_FILE);

?>
<script language="javascript">
<!--

    function setWinClose() {

        if ( opener.closed )  window.close()
    }
//   setInterval("setWinClose()", 100); 


    function goConfig(code) {

        location.href= '<?=$_SERVER[PHP_SELF]?>' + '?wmode=<?=$wmode?>&code=' + code;        
    }

    function goConfigSlt() {

   	   var sltVal = document.smenu.menu.selectedIndex; // 선택된 값
	   var code   = document.smenu.menu.options[sltVal].value;

       location.href= '<?=$_SERVER[PHP_SELF]?>' + '?wmode=<?=$wmode?>&code=' + code;        
    }

    // uconfig_save.php 에도 있음
    function configWinClose() {

       var cd =  parent.opener.top.right.layerCode.cd.value;

       parent.opener.top.dtop.location.href =  '../main/<?=$dcfg->topFile?>' + '?cd=' + cd;
       parent.opener.top.left_top.location.href =  '../main/left_top.php' + '?cd=' + cd;
       parent.opener.top.left.location.href =  '../main/<?=$dcfg->leftFile?>' + '?cd=' + cd;
       parent.opener.top.right.location.href = '../main/<?=$dcfg->rightFile?>' + '?rf=1&cd=' + cd;
      //parent.opener.top.location.reload();
       window.close();
    }

//-->
</script>
</head>
<body  leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" bgcolor="<?=$rcfg->winColor?>" <?=$bodyOnload?> <?=$dcfg->body?>>
<table border=0 cellpadding=0 cellspacing=0 width=98% height=98% align=center style="margin:5px">
<tr>

  <td height=15>

  <table border=0 cellpadding=0 cellspacing=0 style="margin:0px">
  <tr>
    <td width=10>
     <input type=button name=file_dir value="<?=$lg->dirMakeTitle?>" OnClick="goConfig('file_dir')" style="height:25;">
    </td>
    <td width=5></td>
    <td width=10>
     <input type=button name=file_fileup value="<?=$lg->fileUpTitle?>"  OnClick="goConfig('file_fileup')"  style="height:25;">
    </td>
  </tr>
  </table>

  </td>
</tr>
<tr>
  <td>
<?

    switch($code) {

        // 디렉토리 만들기
        case 'file_dir' : include 'file_dir.php'; break;

        // 파일
        case 'file_fileup' : include 'file_fileup.php'; break;

        default :

    } // switch End

?>
  </td>
</tr>
<tr>
  <td height=30 valign=middle>

  <table border=0 cellpadding=0 cellspacing=0 valign=middle  align=center width=95%>
  <tr>
    <td height=5></td>
  </tr>
  <tr>
    <td align=right>
      <input type=submit value=" <?=$lg->butOk?> "     class=but_config name=submitBut> 
      <input type=button value=" <?=$lg->butCancel?> " class=but_config OnClick="configWinClose()"> 
      <input type=button value=" <?=$lg->butApply?> "  class=but_config name=applyBut disabled OnClick="applyCheck()"> 
    </td>

    </form>
  </tr>
  </table>

</tr>
<tr>
  <td height=5></td>
</tr>
</table>
<script language="javascript">
<!--

    isSubmit = true;
    // 적용버튼 클릭시
    function applyCheck() {

        var f = document.input;
        f.apply.value = 'ok';
        
        inputCheck();

        if (isSubmit)
            f.submit();
    }

    // 적용버튼 활성화
    function setApplyBut() {

        document.input.applyBut.disabled = false;
    }

    eval("<?=$code?>" + ".disabled = true");

//-->
</script>
</body>
</html>