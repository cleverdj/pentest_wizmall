<!--

/**
* 타이틀바 크기 조정시
*
* @filename : 타이틀바 크기 조정시
* @version  : v 1.0 2003.01.03 14:15:22
* @author   : nsl <smpoem@magicn.com>
*/

isDrag = 0
isMove = 0
moveLayerID = ''
dragObj = line;

window.document.onmousemove = mouseMove
window.document.onmousedown = mouseDown
window.document.onmouseup   = mouseUp
window.document.ondragstart = mouseStop

// 레이어 이름 조합 eval
function getLayerName(layerID, status) {

	if (status == 1)
		return eval(layerID + 'Header');
	else if (status == 2)
		return eval(layerID + 'HeaderSub');
	else if (status == 3)
		return eval(layerID + 'ResL');
}

// 레이어 이름  조합
function getLayerNameSub(layerID, status) {

	if (status == 1)
		return layerID + 'Header';
	else if (status == 2)
		return layerID + 'HeaderSub';
	else if (status == 3)
		return layerID + 'ResL';
}


function mouseUp() {

// 조절바 :  이름 | <-- 마우스 올렸을때 크기 조정할 수 가능한 부분

	if (isDrag) {

    	isMove = 0;
        isDrag = 0;
        hideLayer('line');


        // 상단 타이틀 부분  이름 | 크기 | ...
//		var curLayer = eval(moveLayerID + 'Header');
//      var curLayer_var = moveLayerID + 'Header';
		var curLayer = getLayerName(moveLayerID, 1);
        var curLayer_var = getLayerNameSub(moveLayerID, 1);

		var curLayerSub = getLayerName(moveLayerID, 2);
        var curLayerSub_var = getLayerNameSub(moveLayerID, 2);

        // 조절바
		var curLayerResL = getLayerName(moveLayerID, 3);
		var curLayerResL_var = getLayerNameSub(moveLayerID, 3);

		// 실제 이동한 거리 = 마우스 x 좌표    - 원래 위치
        moveLeftPos = parseInt(window.event.x) - parseInt(oriLeftPos, 10);

        // 새로운 위치값     =     현재 width       + 이동한값(+, -)
		newNameHeaderLeftPos = curLayer.offsetWidth + moveLeftPos
	    
		// test code
        //alert('* 옮긴 레이어 : ' + moveLayerID + '\n* 이동한 거리 : ' + moveLeftPos + '\n* 현재width : ' + nameHeader.offsetWidth + '\n* 조정할 크기 : ' + newNameHeaderLeftPos)

        // 타이틀 td 의 최소크기 유지를 위해서
		if ( moveLayerID == 'name' || moveLayerID == 'size'  || moveLayerID == 'perms'  || moveLayerID == 'owner') {
			
			// 크기를 50보다 작게 줄였다면 기본 50으로
	        if (newNameHeaderLeftPos < 50) {

                // 실제 이동한 거리 다시계산 (조절바 위치 조정때문에 )
				moveLeftPos = moveLeftPos - (newNameHeaderLeftPos - 50);

				newNameHeaderLeftPos = 50;

			}
       
		} else if ( moveLayerID == 'time' ) {
	    // 기본크기 - 수정한 날짜부분만 
	        
	        if (newNameHeaderLeftPos < 80) {

                // 실제 이동한 거리 다시계산 (조절바 위치 조정때문에 )
				moveLeftPos = moveLeftPos - (newNameHeaderLeftPos - 80);

				newNameHeaderLeftPos = 80;

			}
		}

		// 실제 td 크기 조정
		document.all[curLayer_var].style.width    = newNameHeaderLeftPos; // 상단 타이틀
		document.all[curLayerSub_var].style.width = newNameHeaderLeftPos; // 아래 td


       //^^^^^^^^^^^^^^^^^^ 타이틀 td 크기 조절바 ^^^^^^^^^^^^^^^^^^^^
       // 순서대로 번호 부여
       switch (moveLayerID) {

		   case 'name'  : moveLayerID_num = 1; break;
		   case 'size'  : moveLayerID_num = 2; break;
		   case 'time'  : moveLayerID_num = 3; break;
		   case 'perms' : moveLayerID_num = 4; break;
		   case 'owner' : moveLayerID_num = 5; break;

		   default :
	   } // switch End

	  
         // 조절바 위치 이동  
		if (moveLayerID_num == 1)
		  nameResL.style.pixelLeft += moveLeftPos; // name

		if (moveLayerID_num <= 2)
		  sizeResL.style.pixelLeft += moveLeftPos; // size

		if (moveLayerID_num <= 3)
		  timeResL.style.pixelLeft += moveLeftPos; // time

		if (moveLayerID_num <= 4)
		  permsResL.style.pixelLeft += moveLeftPos; // perms

		if (moveLayerID_num <= 5)
		  ownerResL.style.pixelLeft += moveLeftPos; // owner
       //^^^^^^^^^^^^^^^^^^ /타이틀 td 크기 조절바 ^^^^^^^^^^^^^^^^^^^^

    } // if End

} // moveUp() End



// 마우스 다운시
function mouseDown() {

	if (isDrag) {

        showLayer('line'); // 레이어 보여주기

        // 현재 위치를 마우스 클릭 위치로 설정
        dragObj.style.left = window.event.x;

        // 처음위치 기억
        oriLeftPos = dragObj.style.left;

        dragObj.style.height = document.body.clientHeight;

        dragObj.style.zIndex = 10028

		isMove = 1;

	}
}

// 아무스를 옮길때
function mouseMove() {
	
	if (isMove) {
        
//        var tt = window.event.x + '-'  + window.event.y
//        video.innerHTML = tt;

		dragObj.style.left = window.event.x; // 좌,우 이동

	}
}

function mouseStop() {

	window.event.returnValue = false
}


//-->

